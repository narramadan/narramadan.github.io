(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{mESP:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return s})),t.d(a,"default",(function(){return d}));t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("91GP"),t("q1tI");var n=t("7ljp");var s={templateKey:"article",published:!1,displayComments:!0,showAuthorInfo:!0,showSideBar:!1,author:"narramadan",title:"Uploading files to MinIO Cloud Native Object Store from Quarkus RESTful API",description:"A detailed Step by Step guide on Uploading files to MinIO Cloud Native Object Store from Quarkus RESTful API",date:"2020-05-08T15:46:37.121Z",updated:"2020-05-08T15:46:37.121Z",cover:"../../../images/blog-banners/quarkus-crud-banner-1200x690.png",category:"microservice",tags:["Java","Quarkus","MinIO","Object Store","Microservice","featured"],keywords:["Quarkus MinIO","Quarkus","MinIO","File Upload","Quarkus File Upload","Quarkus Object Store","Rest MinIO","Quarkus MinIO upload","Quarkus Java","Java Object Store","Java MinIO","MinIO File upload","MinIO file upload Quarkus","MinIO file upload Java","Microservice MinIO","Microservice CRUD MinIO","MinIO Docker","Docker Compose MinIO","MinIO java microservice","narra.madan","narramadan","narra.madan@outlook.com","Madan Narra","Narra Madan"]},c=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(n.mdx)("div",a)}},m=c("ExternalLink"),o=c("GithubRepo"),p=c("Todo"),i={_frontmatter:s};function d(e){var a=e.components,t=function(e,a){if(null==e)return{};var t,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,["components"]);return Object(n.mdx)("wrapper",Object.assign({},i,t,{components:a,mdxType:"MDXLayout"}),Object(n.mdx)("h2",{id:"introduction"},"Introduction"),Object(n.mdx)("p",null,"This article is extension of ",Object(n.mdx)(m,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful API + Event-driven Microservice with Quarkus"),"."),Object(n.mdx)("p",null,"We shall go through steps on introducing new REST-endpoint for uploading Catalogue Item Image to ",Object(n.mdx)(m,{href:"https://min.io/",mdxType:"ExternalLink"},Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"MinIO"))," which is a Cloud Native ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Object Storage")," service."),Object(n.mdx)("p",null,"Article includes detailed steps on"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},"Overview on MinIO and provisioning MinIO Server/Client Docker containers"),Object(n.mdx)("li",{parentName:"ul"},"MinIO details configured in application.yaml"),Object(n.mdx)("li",{parentName:"ul"},"Creating service class for MinIO Storage Service"),Object(n.mdx)("li",{parentName:"ul"},"Defining RESTEasy endpoint for Uploading Image"),Object(n.mdx)("li",{parentName:"ul"},"Integration tests"),Object(n.mdx)("li",{parentName:"ul"},"Packaging Native Build"),Object(n.mdx)("li",{parentName:"ul"},"Perform tests with Postman")),Object(n.mdx)("h2",{id:"catalogue-management-system"},"Catalogue Management System"),Object(n.mdx)("p",null,"Apart from the RESTful APIs supported in ",Object(n.mdx)(m,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful Microservice using Quarkus ")," article, we will be introducing the below endpoint as part of this article."),Object(n.mdx)("table",null,Object(n.mdx)("thead",{parentName:"table"},Object(n.mdx)("tr",{parentName:"thead"},Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"HTTP ",Object(n.mdx)("br",null)," Method"),Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"API Name"),Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Path"),Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Response ",Object(n.mdx)("br",null)," Status Code"))),Object(n.mdx)("tbody",{parentName:"table"},Object(n.mdx)("tr",{parentName:"tbody"},Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"POST"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"Upload Catalogue Item Image"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"/{sku}/image"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"201",Object(n.mdx)("br",null),"(Created)")))),Object(n.mdx)("h2",{id:"technology-stack-used-in-this-article-to-build-and-test-drive-the-microservice"},"Technology stack used in this Article to build and test drive the microservice..."),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://developers.redhat.com/download-manager/file/java-1.8.0-openjdk-1.8.0.242-3.b08.redhat.windows.x86_64.msi",mdxType:"ExternalLink"},"Redhat OpenJDK 8")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://quarkus.io/",mdxType:"ExternalLink"},"Quarkus v1.3.2")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://microprofile.io/",mdxType:"ExternalLink"},"Eclipse MicroProfile")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://smallrye.io/",mdxType:"ExternalLink"},"SmallRye")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://hibernate.org/orm/",mdxType:"ExternalLink"},"Hibernate v5.4.14")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html",mdxType:"ExternalLink"},"JPA v2")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://tika.apache.org/",mdxType:"ExternalLink"},"Apache Tika")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://min.io/",mdxType:"ExternalLink"},"MinIO")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://www.docker.com/",mdxType:"ExternalLink"},"Docker")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://maven.apache.org/",mdxType:"ExternalLink"},"Maven v3.6.3")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://gradle.org/install/",mdxType:"ExternalLink"},"Gradle v6.1.1")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)(m,{href:"https://www.jetbrains.com/idea/download/#section=windows",mdxType:"ExternalLink"},"IntelliJ Idea v2019.3.2"))),Object(n.mdx)("h2",{id:"why-minio"},"Why MinIO?"),Object(n.mdx)("p",null,"In the world of containers, it will always be a challenge to mount volumes to scalable containers and additional overhead to manage authorized access for some specific group or to have role based permissions for performing read & write operations. It also involves backup activities which are tiresome and possibility of human errors."),Object(n.mdx)("p",null,"Considering the challenges, Cloud services such as AWS S3, Azure Storage, Google Cloud Storage support for Unlimited Storage, Disaster Recovery and Security. These can be utilized when we are deploying our applications to their respective platform. "),Object(n.mdx)("p",null,"But when developing and testing locally, we might need to consider having storage operations performed to persistent volume or have them connected to remote services. Considering the drawbacks, it leads us to try out storage services which are compatible with online cloud storage services and can be provisioned locally for development and testing."),Object(n.mdx)("p",null,Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"MinIO")," is high-performance, software-defined object storage service which is designed for performance, compatible with AWS S3 API and is 100% open-source. It can be used locally, on-premie or private cloud with no compromise on stringent security requirements and delivers mission-critical availability across a diverse range of workloads."),Object(n.mdx)("p",null,"For more details, refer to their ",Object(n.mdx)(m,{href:"https://min.io/product/overview",mdxType:"ExternalLink"},"features")," page."),Object(n.mdx)("h2",{id:"prerequisites"},"Prerequisites"),Object(n.mdx)("p",null,"Basic knowledge of Java, Maven/Gradle, Quarkus, Docker is necessary for test driving this application."),Object(n.mdx)("p",null,"Application referred in this article is built and tested on ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Ubuntu OS"),". If you are on windows and would like to make your hands dirty with Unix, then I would recommend going through ",Object(n.mdx)(m,{href:"https://2much2learn.com/configure-java-dev-env-on-dual-boot-ubuntu-with-windows-10/",mdxType:"ExternalLink"},"Configure Development environment on Ubuntu 19.10")," article which has detailed steps on setting up development environment on Ubuntu."),Object(n.mdx)("p",null,"At the least, you should have below softwares and tools installed to try out the application:"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"Docker")," & ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"Docker Compose"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Prechecks"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ docker -v\nDocker version ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"19.03"),".6, build 369ce74a3c"))),Object(n.mdx)("h3",{id:"booting-up-services-mentioned-in-quarkus-restful--event-driven-microservice-article"},"Booting up services mentioned in Quarkus RESTful + Event Driven Microservice Article"),Object(n.mdx)("p",null,"As this is extension on top of Creating RESTful Microservice using Quarkus, It is advisable to go through ",Object(n.mdx)(m,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful Microservice using Quarkus ")," article and configure all softwares and tools as mentioned in ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Prerequisites")," section."),Object(n.mdx)("p",null,"Microservice is built using ",Object(n.mdx)(m,{href:"https://quarkus.io/",mdxType:"ExternalLink"},"Quarkus")," to expose APIs and also support handling/publishing events to Kafka. This is integrated with ",Object(n.mdx)(m,{href:"https://www.graylog.org/",mdxType:"ExternalLink"},"Graylog")," for centralized logging and ",Object(n.mdx)(m,{href:"https://www.jaegertracing.io/",mdxType:"ExternalLink"},"Jaeger")," for distributed tracing."),Object(n.mdx)("p",null,"Below are the ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Restful APIs")," that are exposed by Catalogue Management System microservice application."),Object(n.mdx)("table",null,Object(n.mdx)("thead",{parentName:"table"},Object(n.mdx)("tr",{parentName:"thead"},Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"HTTP ",Object(n.mdx)("br",null)," Method"),Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"API Name"),Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Path"),Object(n.mdx)("th",Object.assign({parentName:"tr"},{align:null}),"Response ",Object(n.mdx)("br",null)," Status Code"))),Object(n.mdx)("tbody",{parentName:"table"},Object(n.mdx)("tr",{parentName:"tbody"},Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"POST"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"Create Catalogue Item"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"/"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"201",Object(n.mdx)("br",null),"(Created)")),Object(n.mdx)("tr",{parentName:"tbody"},Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"GET"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"Get Catalogue Items"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"/"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"200",Object(n.mdx)("br",null),"(Ok)")),Object(n.mdx)("tr",{parentName:"tbody"},Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"GET"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"Get Catalogue Item"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"/{sku}"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"200",Object(n.mdx)("br",null),"(Ok)")),Object(n.mdx)("tr",{parentName:"tbody"},Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"PUT"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"Update Catalogue Item"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"/{sku}"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"200",Object(n.mdx)("br",null),"(Ok)")),Object(n.mdx)("tr",{parentName:"tbody"},Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"DELETE"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"Delete Catalogue Item"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"/{sku}"),Object(n.mdx)("td",Object.assign({parentName:"tr"},{align:null}),"204",Object(n.mdx)("br",null),"(No Content)")))),Object(n.mdx)(o,{href:"https://github.com/2much2learn/article-apr23-restful-event-driven-microservice-using-quarkus-jpa-kafka",mdxType:"GithubRepo"},"restful-event-driven-microservice-using-quarkus-jpa-kafka"),Object(n.mdx)("p",null,"Follow the series of steps mentioned in Prerequisites section to boot up the database and supporting containers. To ensure microservice is up and running, access ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"http://localhost:8080/health")," in browser and should show ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"status")," as ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"UP"),"."),Object(n.mdx)("h3",{id:"start-minio"},"Start MinIO"),Object(n.mdx)("p",null,Object(n.mdx)("strong",{parentName:"p"},"MinIO")," provides Server & Client artifacts in the form of native executable or docker images. We can bootstrap MinIO Server using ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"minio/minio")," docker image and use ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"minio/mc")," docker image to bootstrap the client which we can connect to the server instance."),Object(n.mdx)("h4",{id:"minio-server"},"MinIO Server"),Object(n.mdx)("p",null,"Execute the below commands to pull and run the container:"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Pull and Start MinIO Server Container"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ docker pull minio/minio\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"# Run in detached mode with key/secret passed"),"\n$ docker run -p ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"9090"),":9000 --name minio -e ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token assign-left variable"}),"MINIO_ACCESS_KEY"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"minioadmin -e ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token assign-left variable"}),"MINIO_SECRET_KEY"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"minioadmin -d minio/minio server /data"))),Object(n.mdx)("p",null,"As Observed,"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"minioadmin")," are passed as environment variables for ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"MINIO_ACCESS_KEY")," & ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"MINIO_SECRET_KEY"),". These will be used as credentials to login to MinIO UI and also when accessing MinIO services through MinIO Client SDKs."),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"9090")," port is mapped to MinIO default exposed post ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"9000")," to avoid clashes with other provisioned services which are already using ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"9000"),"."),Object(n.mdx)("li",{parentName:"ul"},"Run command ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"docker logs minio")," to verify startup logs captured as part of server bootup."),Object(n.mdx)("li",{parentName:"ul"},"MinIO UI is accessible from ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"http://127.0.0.1:9090")," and login with the credentials passed to the container.")),Object(n.mdx)("h4",{id:"minio-client"},"MinIO Client"),Object(n.mdx)("p",null,Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"MinIO Client")," (",Object(n.mdx)(m,{href:"https://docs.min.io/docs/minio-client-quickstart-guide.html",mdxType:"ExternalLink"},"mc"),") provides a modern alternative to UNIX commands like ls, cat, cp, mirror, diff, find etc. It supports file systems and Amazon S3 compatible cloud storage service signatures."),Object(n.mdx)("p",null,"Execute the below commands to pull and hop on to shell to access ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"mc"),":"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Pull and Start MinIO Client Container"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ docker pull minio/mc\n\n$ docker run -it --entrypoint",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"/bin/sh minio/mc"))),Object(n.mdx)("p",null,"Once connected to containers shell, we can configure the client to connect to provisioned server and perform various operations. Below are few for reference:"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Configure provisioned server with client"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," config ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"host")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"add")," minio http://",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"CONTAINER_PORT",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),":9000 minioadmin minioadmin --api S3v4\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"CONTAINER_PORT",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," - This can be identified by pulling out server logs by running - docker logs minio ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"Ex: ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"172.17"),".0.3",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Capture request and response traces handled by the server"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," admin trace -v -a --json minio"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"List buckets created"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ls")," minio\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"2020"),"-05-09 05:59:46 UTC",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"      0B catalogue-item-images/\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"2020"),"-05-09 02:54:29 UTC",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"      0B test/\n\n$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ls")," minio/test\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"2020"),"-05-09 02:54:29 UTC",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"   18KiB postman_health.png"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Set Policy to bucket"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," policy -r set-json policy.json minio/catalogue-item-images\n\n- policy.json\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Version"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),":"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"2012-10-17"'),",\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Statement"'),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Sid"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),":"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"PublicRead"'),",\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Effect"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),":"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Allow"'),",\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Principal"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"*"'),",\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Action"'),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"s3:GetObject"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),",\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Resource"'),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"arn:aws:s3:::catalogue-item-images/*"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Get policy tagged to bucket"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," policy get-json minio/catalogue-item-images"))),Object(n.mdx)("p",null,"And many more commands to ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"list"),", ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"make"),", ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"remove"),", ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"copy"),", ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"remove"),", set & get ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"policy"),", perform ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"admin")," actions, apply ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"config"),"â€¦"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Available Client Commands"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ls"),"        list buckets and objects\nmb        ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"make")," a bucket\nrb        remove a bucket\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"cat"),"       display object contents\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"head"),"      display first ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'n'")," lines of an object\npipe      stream STDIN to an object\nshare     generate URL ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," temporary access to an object\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"cp"),"        copy objects\nmirror    synchronize objects to a remote site\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"find"),"      search ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," objects\nsql       run sql queries on objects\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"stat"),"      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"stat")," contents of objects\nlock      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"set")," and get object lock configuration\nretention ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"set")," object retention ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," objects with a given prefix\nlegalhold ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"set")," object legal hold ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," objects\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"diff"),"      list differences ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"in")," object name, size, and ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"date")," between buckets\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"rm"),"        remove objects\nevent     manage object notifications\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"watch"),"     ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"watch")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," object events\npolicy    manage anonymous access to objects\nadmin     manage MinIO servers\nsession   manage saved sessions ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"cp")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"command"),"\nconfig    manage ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"mc")," configuration ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"file"),"\nupdate    check ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," a new software update\nversion   print version info"))),Object(n.mdx)("h2",{id:"adding-dependencies-needed-to-support-file-upload"},"Adding dependencies needed to support file upload"),Object(n.mdx)("p",null,"Below are couple of dependencies that are included for introducing file upload feature on top of existing application."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"pom.xml"),Object(n.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"xml"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-xml"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-xml"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token comment"}),"\x3c!-- RESTEasy Multipart provider for file upload capability--\x3e")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"org.jboss.resteasy",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"resteasy-multipart-provider",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"exclusions"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"exclusion"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"org.jboss.spec.javax.annotation",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"jboss-annotations-api_1.3_spec",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"exclusion"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"exclusion"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"javax.activation",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"activation",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"exclusion"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"exclusions"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token comment"}),"\x3c!-- To validated if uploaded file is actually of image type --\x3e")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"org.apache.tika",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"tika-core",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"version"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"1.24.1",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"version"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token comment"}),"\x3c!-- MinIO Client SK --\x3e")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"io.minio",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"minio",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"version"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"7.0.2",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"version"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token comment"}),"\x3c!-- Quarkus Template engine to render minio policy files --\x3e")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"io.quarkus",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"quarkus-qute",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">"))))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"build.gradle"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"ruby"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-ruby"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-ruby"}),"implementation",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'org.jboss.resteasy:resteasy-multipart-provider'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  exclude group",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'org.jboss.spec.javax.annotation'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"module"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'jboss-annotations-api_1.3_spec'"),"\n  exclude group",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'javax.activation'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"module"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'activation'"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\nimplementation ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'org.apache.tika:tika-core:1.24.1'"),"\nimplementation ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'io.minio:minio:7.0.2'"),"\nimplementation ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'io.quarkus:quarkus-qute'")))),Object(n.mdx)("p",null,"Upon ",Object(n.mdx)("strong",{parentName:"p"},"application startup")," with the above dependencies, their might be failure due to ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"com.ctc.wstx.stax.WstxInputFactory not found")," ",Object(n.mdx)("strong",{parentName:"p"},"error"),". There is a defect ",Object(n.mdx)(m,{href:"https://github.com/quarkusio/quarkus/issues/7359",mdxType:"ExternalLink"},Object(n.mdx)("a",Object.assign({parentName:"p"},{href:"https://github.com/quarkusio/quarkus/issues/7359"}),"https://github.com/quarkusio/quarkus/issues/7359"))," reported and ",Object(n.mdx)("strong",{parentName:"p"},"still open")," as of drafting this article. To fix this we need to add the below dependency."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"pom.xml"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"xml"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-xml"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-xml"}),"...\n...\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"\x3c!-- To fix https://github.com/quarkusio/quarkus/issues/7359 --\x3e"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"com.fasterxml.woodstox",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"groupId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"woodstox-core",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"artifactId"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"<"),"version"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"6.2.0",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"version"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token tag"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"</"),"dependency"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),">")),"\n...\n..."))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"build.gradle"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"ruby"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-ruby"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-ruby"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"\nimplementation ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'com.fasterxml.woodstox:woodstox-core:6.2.0'"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".")))),Object(n.mdx)("h2",{id:"create-image-upload-controller"},"Create Image Upload Controller"),Object(n.mdx)("p",null,"Controller class ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"CatalogueItemImageUploadController.java")," is introduced to handle image upload for specific catalogue item. ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"POST")," operation is handled by accepting the provided path param and the binary content received in the form of ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"InputStream"),"."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"CatalogueItemImageUploadController.java"),Object(n.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-java"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-java"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token annotation punctuation"}),"@POST"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token annotation punctuation"}),"@Path"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"CatalogueControllerAPIPaths"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"UPLOAD_IMAGE",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"public")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Response")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"uploadImage"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token annotation punctuation"}),"@PathParam"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"value ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"sku"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"String")," skuNumber",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"InputStream")," inputStream",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"throws")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"ResourceNotFoundException"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Exception")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// Validate skuNumber by Getting catalogue item by sku. If not available, resource not found will be thrown."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  catalogueCrudService",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"getCatalogueItem"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"skuNumber",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// Create temp file from the uploaded image input stream"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"File")," tempFile ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"createTempFile"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"skuNumber",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," inputStream",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// Validate if the uploaded file is of type image. Else throw error"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Tika")," tika ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"new")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"Tika"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"String")," mimeType ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token operator"}),"=")," tika",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"detect"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"tempFile",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"if")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token operator"}),"!"),"mimeType",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"contains"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token string"}),'"image"'),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"    ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"throw")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"new")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"ImageUploadException"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"ErrorCodes"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),"ERR_IMAGE_UPLOAD_INVALID_FORMAT",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"String"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"format"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token string"}),'"File uploaded for SKU:%s is not valid image format"'),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," skuNumber",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"}")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// Upload the file to storage service"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"  storageService",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"uploadCatalogueImage"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),"skuNumber",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," mimeType",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," tempFile",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),";")),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Response"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"status"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Response"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Status"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"CREATED",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"build"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"private")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"File")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token function"}),"createTempFile"),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"String")," skuNumber",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"InputStream")," inputStream",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token keyword"}),"throws")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token class-name"}),"ImageUploadException")," ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"{")),"  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"try")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"File")," tempFile ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"File"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"createTempFile"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"skuNumber",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'".tmp"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n    tempFile",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"deleteOnExit"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"FileOutputStream")," out ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"FileOutputStream"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"tempFile",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"IOUtils"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"copy"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"inputStream",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," out",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"return")," tempFile",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"catch"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Exception")," e",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"throw")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"new")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"ImageUploadException"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"String"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"format"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Error occurred while creating temp file for uploaded image : %s"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," skuNumber",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," e",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"validate-if-file-uploaded-is-valid-image-format"},"Validate if file uploaded is valid image format"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"handle-file-upload-with-minio-service-class"},"Handle file upload with MinIO Service class"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"handling-exceptions"},"Handling Exceptions"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"testing-with-quarkus"},"Testing with Quarkus"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h3",{id:"testing-image-upload-rest-endpoint"},"Testing Image Upload REST endpoint"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"packaging-and-running-quarkus-application"},"Packaging and Running Quarkus Application"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h3",{id:"jvm-mode"},"JVM Mode"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h3",{id:"native-mode"},"Native Mode"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"testing-image-upload-api-via-postman"},"Testing Image Upload API via Postman"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h3",{id:"upload-catalogue-item-image"},"Upload Catalogue Item Image"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h3",{id:"uploading-unsupported-image-format"},"Uploading Unsupported Image Format"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("h2",{id:"gotchas"},"Gotchas"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},"Issues\nGetting issue ",Object(n.mdx)("a",Object.assign({parentName:"li"},{href:"https://github.com/testcontainers/testcontainers-java/issues/2470"}),"https://github.com/testcontainers/testcontainers-java/issues/2470")," if following GenericContainer approach provided here - ",Object(n.mdx)("a",Object.assign({parentName:"li"},{href:"https://www.testcontainers.org/quickstart/junit_5_quickstart/"}),"https://www.testcontainers.org/quickstart/junit_5_quickstart/"),". ")),Object(n.mdx)("h2",{id:"conclusion"},"Conclusion"),Object(n.mdx)(p,{mdxType:"Todo"},"Complete this Section"))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-content-articles-todo-microservice-uploading-files-to-cloud-native-object-store-from-quarkus-restful-api-index-md-bb69585ae5c6c977d142.js.map