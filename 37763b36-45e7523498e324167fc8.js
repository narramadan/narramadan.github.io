"use strict";(self.webpackChunk_2much2learn_com=self.webpackChunk_2much2learn_com||[]).push([[1517],{47353:function(a,e,n){n.r(e),n.d(e,{_frontmatter:function(){return o},default:function(){return i}});var t=n(63366),s=(n(67294),n(64983)),m=["components"],o={templateKey:"article",published:!0,displayComments:!0,showAuthorInfo:!0,showSideBar:!1,author:"narramadan",title:"Uploading files to MinIO Cloud Native Object Store from Quarkus RESTful API",description:"A detailed Step by Step guide on Uploading files to MinIO Cloud Native Object Store from Quarkus RESTful API",date:"2020-05-10T15:46:37.121Z",updated:"2020-05-10T15:46:37.121Z",cover:"../../../images/blog-banners/crud-quarkus-upload-minio-1200x690.png",category:"microservice",tags:["Java","Quarkus","MinIO","Object Store","Microservice","featured"],keywords:["Quarkus MinIO","Quarkus","MinIO","File Upload","Quarkus File Upload","Quarkus Object Store","Rest MinIO","Quarkus MinIO upload","Quarkus Java","Java Object Store","Java MinIO","MinIO File upload","MinIO file upload Quarkus","MinIO file upload Java","Microservice MinIO","Microservice CRUD MinIO","MinIO Docker","Docker Compose MinIO","MinIO java microservice","narra.madan","narramadan","narra.madan@outlook.com","Madan Narra","Narra Madan"]},p=function(a){return function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,s.mdx)("div",e)}},c=p("GithubRepo"),d=p("ExternalLink"),r=p("ExternalLinksListContainer"),l={_frontmatter:o};function i(a){var e=a.components,n=(0,t.Z)(a,m);return(0,s.mdx)("wrapper",Object.assign({},l,n,{components:e,mdxType:"MDXLayout"}),(0,s.mdx)(c,{href:"https://github.com/2much2learn/article-may10-uploading-files-to-cloud-native-object-store-from-quarkus-restful-api",mdxType:"GithubRepo"},"uploading-files-to-cloud-native-object-store-from-quarkus-restful-api"),(0,s.mdx)("h2",{id:"introduction"},"Introduction"),(0,s.mdx)("p",null,"This article is extension of ",(0,s.mdx)(d,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful API + Event-driven Microservice with Quarkus"),"."),(0,s.mdx)("p",null,"We shall go through steps on introducing new REST-endpoint for uploading Catalogue Item Image to ",(0,s.mdx)(d,{href:"https://min.io/",mdxType:"ExternalLink"},(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO"))," which is a Cloud Native ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Object Storage")," service."),(0,s.mdx)("p",null,"Article includes detailed steps on"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Overview on MinIO and provisioning MinIO Server/Client Docker containers"),(0,s.mdx)("li",{parentName:"ul"},"MinIO server details configured in application.yaml"),(0,s.mdx)("li",{parentName:"ul"},"Creating service class for MinIO Storage Service"),(0,s.mdx)("li",{parentName:"ul"},"Defining RESTEasy endpoint for Uploading Image"),(0,s.mdx)("li",{parentName:"ul"},"Integration tests"),(0,s.mdx)("li",{parentName:"ul"},"Packaging Native Build"),(0,s.mdx)("li",{parentName:"ul"},"Perform tests with Postman")),(0,s.mdx)("h2",{id:"catalogue-management-system"},"Catalogue Management System"),(0,s.mdx)("p",null,"Apart from the RESTful APIs supported in ",(0,s.mdx)(d,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful Microservice using Quarkus ")," article, we will be introducing the below endpoint as part of this article."),(0,s.mdx)("table",null,(0,s.mdx)("thead",{parentName:"table"},(0,s.mdx)("tr",{parentName:"thead"},(0,s.mdx)("th",{parentName:"tr",align:null},"HTTP ",(0,s.mdx)("br",null)," Method"),(0,s.mdx)("th",{parentName:"tr",align:null},"API Name"),(0,s.mdx)("th",{parentName:"tr",align:null},"Path"),(0,s.mdx)("th",{parentName:"tr",align:null},"Response ",(0,s.mdx)("br",null)," Status Code"))),(0,s.mdx)("tbody",{parentName:"table"},(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"POST"),(0,s.mdx)("td",{parentName:"tr",align:null},"Upload Catalogue Item Image"),(0,s.mdx)("td",{parentName:"tr",align:null},"/{sku}/image"),(0,s.mdx)("td",{parentName:"tr",align:null},"201",(0,s.mdx)("br",null),"(Created)")))),(0,s.mdx)("h2",{id:"technology-stack-used-in-this-article-to-build-and-test-drive-the-microservice"},"Technology stack used in this Article to build and test drive the microservice..."),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://github.com/graalvm/graalvm-ce-builds/releases/download/vm-20.0.0/graalvm-ce-java11-linux-amd64-20.0.0.tar.gz",mdxType:"ExternalLink"},"GraalVM JDK 11")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://quarkus.io/",mdxType:"ExternalLink"},"Quarkus v1.3.2")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://microprofile.io/",mdxType:"ExternalLink"},"Eclipse MicroProfile")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://smallrye.io/",mdxType:"ExternalLink"},"SmallRye")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://hibernate.org/orm/",mdxType:"ExternalLink"},"Hibernate v5.4.14")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html",mdxType:"ExternalLink"},"JPA v2")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://tika.apache.org/",mdxType:"ExternalLink"},"Apache Tika")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://min.io/",mdxType:"ExternalLink"},"MinIO")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://www.docker.com/",mdxType:"ExternalLink"},"Docker")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://maven.apache.org/",mdxType:"ExternalLink"},"Maven v3.6.3")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://gradle.org/install/",mdxType:"ExternalLink"},"Gradle v6.1.1")),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)(d,{href:"https://www.jetbrains.com/idea/download/#section=windows",mdxType:"ExternalLink"},"IntelliJ Idea v2019.3.2"))),(0,s.mdx)("h2",{id:"why-minio"},"Why MinIO?"),(0,s.mdx)("p",null,"In the world of containers, it will always be a challenge to mount volumes to scalable containers and additional overhead to manage authorized access for some specific group or to have role based permissions for performing read & write operations. It also involves backup activities which are tiresome and possibility of human errors."),(0,s.mdx)("p",null,"Considering the challenges, Cloud services such as AWS S3, Azure Storage, Google Cloud Storage support for Unlimited Storage, Disaster Recovery and Security. These can be utilized when we are deploying our applications to their respective platform. "),(0,s.mdx)("p",null,"But when developing and testing locally, we might need to consider having storage operations performed to persistent volume or have them connected to remote services. Considering the drawbacks, it leads us to try out storage services which are compatible with online cloud storage services and can be provisioned locally for development and testing."),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"300px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/e18c7f6aab8f91bcfbb09571bcff7c42/5a46d/minio-logo.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"43.558282208588956%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJElEQVQoz6XSTyulcRQH8M9zL+WKposSGozNtaO4QyjZqVkpb8EC2UhINhqFlGYxNibJgmTDYpSUhfdg8i68hUcP507SteHU6fz5nfM9f35HbaIB57uDrYtpep1DMt5an3ihXMjkFVez88Gk6VYm5mdLxfV07XtpvrfoU5S1UJv4ir1yS11fTWIS7ShgCp0Yxgh60Iwx9KE3ulzEbGWiUVzkWecZ7AZXOMA//MAv7OI+iuxhBXPh3wh5lAFu4g/OCvmkMZJvcYffAbAdAGd4wM8AW47YCj2KTk7RH86T0LPxDjEd1Xdi1H0cYwEzWMJfXGK1gpw9DIT+LVtr6F34grbghthTB1rQFHETseP/lLVe/uC/JtX0IXS/uT1V7s47dq6S9wSVRjD0i6bn+AAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"MinIO Object Storage Service",title:"MinIO Object Storage Service",src:"/static/e18c7f6aab8f91bcfbb09571bcff7c42/5a46d/minio-logo.png",srcSet:["/static/e18c7f6aab8f91bcfbb09571bcff7c42/222b7/minio-logo.png 163w","/static/e18c7f6aab8f91bcfbb09571bcff7c42/5a46d/minio-logo.png 300w"],sizes:"(max-width: 300px) 100vw, 300px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"MinIO Object Storage Service"),"\n  ")),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO")," is high-performance, software-defined ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"object storage service")," which is designed for performance, ",(0,s.mdx)("strong",{parentName:"p"},"compatible")," with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"AWS S3")," API and is 100% open-source. Applications that have been configured to talk to Amazon S3 can also be configured to talk to Minio, allowing Minio to be a viable ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"alternative to S3")," if you want more control over your object storage server. The service stores unstructured data such as photos, videos, log files, backups, and container/VM images, and can even provide a single object storage server that pools multiple drives spread across many servers."),(0,s.mdx)("p",null,"It can be used locally, on-premie or private cloud with no compromise on stringent security requirements and delivers mission-critical availability across a diverse range of workloads."),(0,s.mdx)("p",null,"For more details, refer to their ",(0,s.mdx)(d,{href:"https://min.io/product/overview",mdxType:"ExternalLink"},"features")," page."),(0,s.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,s.mdx)("p",null,"Basic knowledge of Java, Maven/Gradle, Quarkus, Docker is necessary for test driving this application."),(0,s.mdx)("p",null,"Application referred in this article is built and tested on ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Ubuntu OS"),". If you are on windows and would like to make your hands dirty with Unix, then I would recommend going through ",(0,s.mdx)(d,{href:"https://2much2learn.com/configure-java-dev-env-on-dual-boot-ubuntu-with-windows-10/",mdxType:"ExternalLink"},"Configure Development environment on Ubuntu 19.10")," article which has detailed steps on setting up development environment on Ubuntu."),(0,s.mdx)("p",null,"At the least, you should have below softwares and tools installed to try out the application:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("code",{parentName:"li",className:"language-text"},"Docker")," & ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"Docker Compose"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Prechecks"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," -v\nDocker version ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"19.03"),".6, build 369ce74a3c"))),(0,s.mdx)("h3",{id:"booting-up-services-mentioned-in-quarkus-restful--event-driven-microservice-article"},"Booting up services mentioned in Quarkus RESTful + Event Driven Microservice Article"),(0,s.mdx)("p",null,"As this is extension on top of Creating RESTful Microservice using Quarkus, It is advisable to go through ",(0,s.mdx)(d,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful Microservice using Quarkus ")," article and configure all softwares and tools as mentioned in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Prerequisites")," section."),(0,s.mdx)("p",null,"Microservice is built using ",(0,s.mdx)(d,{href:"https://quarkus.io/",mdxType:"ExternalLink"},"Quarkus")," to expose APIs and also support handling/publishing events to Kafka. This is integrated with ",(0,s.mdx)(d,{href:"https://www.graylog.org/",mdxType:"ExternalLink"},"Graylog")," for centralized logging and ",(0,s.mdx)(d,{href:"https://www.jaegertracing.io/",mdxType:"ExternalLink"},"Jaeger")," for distributed tracing."),(0,s.mdx)("p",null,"Below are the ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Restful APIs")," that are exposed by Catalogue Management System microservice application."),(0,s.mdx)("table",null,(0,s.mdx)("thead",{parentName:"table"},(0,s.mdx)("tr",{parentName:"thead"},(0,s.mdx)("th",{parentName:"tr",align:null},"HTTP ",(0,s.mdx)("br",null)," Method"),(0,s.mdx)("th",{parentName:"tr",align:null},"API Name"),(0,s.mdx)("th",{parentName:"tr",align:null},"Path"),(0,s.mdx)("th",{parentName:"tr",align:null},"Response ",(0,s.mdx)("br",null)," Status Code"))),(0,s.mdx)("tbody",{parentName:"table"},(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"POST"),(0,s.mdx)("td",{parentName:"tr",align:null},"Create Catalogue Item"),(0,s.mdx)("td",{parentName:"tr",align:null},"/"),(0,s.mdx)("td",{parentName:"tr",align:null},"201",(0,s.mdx)("br",null),"(Created)")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"GET"),(0,s.mdx)("td",{parentName:"tr",align:null},"Get Catalogue Items"),(0,s.mdx)("td",{parentName:"tr",align:null},"/"),(0,s.mdx)("td",{parentName:"tr",align:null},"200",(0,s.mdx)("br",null),"(Ok)")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"GET"),(0,s.mdx)("td",{parentName:"tr",align:null},"Get Catalogue Item"),(0,s.mdx)("td",{parentName:"tr",align:null},"/{sku}"),(0,s.mdx)("td",{parentName:"tr",align:null},"200",(0,s.mdx)("br",null),"(Ok)")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"PUT"),(0,s.mdx)("td",{parentName:"tr",align:null},"Update Catalogue Item"),(0,s.mdx)("td",{parentName:"tr",align:null},"/{sku}"),(0,s.mdx)("td",{parentName:"tr",align:null},"200",(0,s.mdx)("br",null),"(Ok)")),(0,s.mdx)("tr",{parentName:"tbody"},(0,s.mdx)("td",{parentName:"tr",align:null},"DELETE"),(0,s.mdx)("td",{parentName:"tr",align:null},"Delete Catalogue Item"),(0,s.mdx)("td",{parentName:"tr",align:null},"/{sku}"),(0,s.mdx)("td",{parentName:"tr",align:null},"204",(0,s.mdx)("br",null),"(No Content)")))),(0,s.mdx)(c,{href:"https://github.com/2much2learn/article-apr23-restful-event-driven-microservice-using-quarkus-jpa-kafka",mdxType:"GithubRepo"},"restful-event-driven-microservice-using-quarkus-jpa-kafka"),(0,s.mdx)("p",null,"Follow the series of steps mentioned in Prerequisites section to boot up the database and supporting containers. To ensure microservice is up and running, access ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"http://localhost:8080/health")," in browser and should show ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"status")," as ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"UP"),"."),(0,s.mdx)("h3",{id:"start-minio"},"Start MinIO"),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"MinIO")," provides Server & Client artifacts in the form of native executable or docker images. We can bootstrap MinIO Server using ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"minio/minio")," docker image and use ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"minio/mc")," docker image to bootstrap the client which we can connect to the server instance."),(0,s.mdx)("h4",{id:"minio-server"},"MinIO Server"),(0,s.mdx)("p",null,"Execute the below commands to pull and run the container:"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Pull and Start MinIO Server Container"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," pull minio/minio\n\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"# Run in detached mode with key/secret passed"),"\n$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," run -p ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"9090"),":9000 --name minio -e ",(0,s.mdx)("span",{parentName:"code",className:"token assign-left variable"},"MINIO_ACCESS_KEY"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),"minioadmin -e ",(0,s.mdx)("span",{parentName:"code",className:"token assign-left variable"},"MINIO_SECRET_KEY"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),"minioadmin -d minio/minio server /data"))),(0,s.mdx)("p",null,"As Observed,"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("code",{parentName:"li",className:"language-text"},"minioadmin")," are passed as environment variables for ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"MINIO_ACCESS_KEY")," & ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"MINIO_SECRET_KEY"),". These will be used as credentials to login to MinIO UI and also when accessing MinIO services through MinIO Client SDKs."),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("code",{parentName:"li",className:"language-text"},"9090")," port is mapped to MinIO default exposed post ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"9000")," to avoid clashes with other provisioned services which are already using ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"9000"),"."),(0,s.mdx)("li",{parentName:"ul"},"Run command ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"docker logs minio")," to verify startup logs captured as part of server bootup."),(0,s.mdx)("li",{parentName:"ul"},"MinIO UI is accessible from ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"http://127.0.0.1:9090")," and login with the credentials passed to the container.")),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/27268b5b6bb9646b9b13dfd8ceb7e239/b2cef/minio-ui-login.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"53.37423312883436%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAAe0lEQVQoz2Ng0DInH+GR49C35jKwIVMzo7YFk7YFmZrZ9a05KbGZkUybNc1Y9ay5jOwZNM3IshmMyHQ2AaRpxoBg4XEetuDgMrJjYNS2YNaxZNG1ZNaxJFIbg5qxmI2HfXwGA4uuFaehHYehLZu+DbE2a5hyGtnJOPoCAFGrVYXMk8QjAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:'"MinIO UI Login page"',title:"MinIO UI Login page",src:"/static/27268b5b6bb9646b9b13dfd8ceb7e239/a6d36/minio-ui-login.png",srcSet:["/static/27268b5b6bb9646b9b13dfd8ceb7e239/222b7/minio-ui-login.png 163w","/static/27268b5b6bb9646b9b13dfd8ceb7e239/ff46a/minio-ui-login.png 325w","/static/27268b5b6bb9646b9b13dfd8ceb7e239/a6d36/minio-ui-login.png 650w","/static/27268b5b6bb9646b9b13dfd8ceb7e239/b2cef/minio-ui-login.png 847w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"MinIO UI Login page"),"\n  ")),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/098cd3980adc9c7fc8c8d3b15cd7b682/525d3/minio-ui-home.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.901840490797547%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAA8UlEQVQY03WPz0rDQBCHp1FsrYWCj2AVb7XZENNDTLup8VDwIUT8cxCp+FT6WHoTD4u1XXZ3ZkfSRRGl33GY3/ebgW4+7ebT3dF5e3gGB2l5NUPiD4MLg0q7hUFmz/8gIq01REJGSdmIx1E8hsNMXj94JL3U1lr/Da8BmonsZFX7+LSVTmA/kZf3PnT5v1XB4lbUSiLYyarOsGql5XY6gZ6QNzN6U1Z9GnSI+BNGROccM5sVzjlihoaQcFRA/2RDyPrs20d+n+N8adER0e/m4KotiKi1f32BrUHRFKPNQRH1c9iL5cVd2F77apgr5Z+fvgCJtgxpJAeGQwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:'"MinIO UI Home page"',title:"MinIO UI Home page",src:"/static/098cd3980adc9c7fc8c8d3b15cd7b682/a6d36/minio-ui-home.png",srcSet:["/static/098cd3980adc9c7fc8c8d3b15cd7b682/222b7/minio-ui-home.png 163w","/static/098cd3980adc9c7fc8c8d3b15cd7b682/ff46a/minio-ui-home.png 325w","/static/098cd3980adc9c7fc8c8d3b15cd7b682/a6d36/minio-ui-home.png 650w","/static/098cd3980adc9c7fc8c8d3b15cd7b682/e548f/minio-ui-home.png 975w","/static/098cd3980adc9c7fc8c8d3b15cd7b682/525d3/minio-ui-home.png 1090w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"MinIO UI Home page"),"\n  ")),(0,s.mdx)("h4",{id:"minio-client"},"MinIO Client"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO Client")," (",(0,s.mdx)(d,{href:"https://docs.min.io/docs/minio-client-quickstart-guide.html",mdxType:"ExternalLink"},"mc"),") provides a modern alternative to UNIX commands like ls, cat, cp, mirror, diff, find etc. It supports file systems and Amazon S3 compatible cloud storage service signatures."),(0,s.mdx)("p",null,"Execute the below commands to pull and hop on to shell to access ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"mc"),":"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Pull and Start MinIO Client Container"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," pull minio/mc\n\n$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," run -it --entrypoint",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),"/bin/sh minio/mc"))),(0,s.mdx)("p",null,"Once connected to containers shell, we can configure the client to connect to provisioned server and perform various operations. Below are few for reference:"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Configure provisioned server with client"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," config ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"host")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"add")," minio http://",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"<"),"CONTAINER_PORT",(0,s.mdx)("span",{parentName:"code",className:"token operator"},">"),":9000 minioadmin minioadmin --api S3v4\n\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"<"),"CONTAINER_PORT",(0,s.mdx)("span",{parentName:"code",className:"token operator"},">")," - This can be identified by pulling out server logs by running - ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," logs minio ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"Ex: ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"172.17"),".0.3",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Capture request and response traces handled by the server"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," admin trace -v -a --json minio"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"List buckets created"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"ls")," minio\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"2020"),"-05-09 05:59:46 UTC",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),"      0B catalogue-item-images/\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"2020"),"-05-09 02:54:29 UTC",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),"      0B test/\n\n$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"ls")," minio/test\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token number"},"2020"),"-05-09 02:54:29 UTC",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),"   18KiB postman_health.png"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Set Policy to bucket"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," policy -r set-json policy.json minio/catalogue-item-images\n\n- policy.json\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Version"'),(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},":"),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"2012-10-17"'),",\n  ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Statement"'),":",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Sid"'),(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},":"),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"PublicRead"'),",\n      ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Effect"'),(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},":"),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Allow"'),",\n      ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Principal"'),(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"*"'),",\n      ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Action"'),":",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"s3:GetObject"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),",\n      ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Resource"'),":",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"arn:aws:s3:::catalogue-item-images/*"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Get policy tagged to bucket"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," policy get-json minio/catalogue-item-images"))),(0,s.mdx)("p",null,"And many more commands to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"list"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"make"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"remove"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"copy"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"remove"),", set & get ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"policy"),", perform ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"admin")," actions, apply ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"config"),"…"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Available Client Commands"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},(0,s.mdx)("span",{parentName:"code",className:"token function"},"ls"),"        list buckets and objects\nmb        ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"make")," a bucket\nrb        remove a bucket\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"cat"),"       display object contents\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"head"),"      display first ",(0,s.mdx)("span",{parentName:"code",className:"token string"},"'n'")," lines of an object\npipe      stream STDIN to an object\nshare     generate URL ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," temporary access to an object\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"cp"),"        copy objects\nmirror    synchronize objects to a remote site\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"find"),"      search ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," objects\nsql       run sql queries on objects\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"stat"),"      ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"stat")," contents of objects\nlock      ",(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},"set")," and get object lock configuration\nretention ",(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},"set")," object retention ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," objects with a given prefix\nlegalhold ",(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},"set")," object legal hold ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," objects\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"diff"),"      list differences ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"in")," object name, size, and ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"date")," between buckets\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"rm"),"        remove objects\nevent     manage object notifications\n",(0,s.mdx)("span",{parentName:"code",className:"token function"},"watch"),"     ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"watch")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," object events\npolicy    manage anonymous access to objects\nadmin     manage MinIO servers\nsession   manage saved sessions ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"cp")," ",(0,s.mdx)("span",{parentName:"code",className:"token builtin class-name"},"command"),"\nconfig    manage ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"mc")," configuration ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"file"),"\nupdate    check ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," a new software update\nversion   print version info"))),(0,s.mdx)("h4",{id:"minio-sdk"},"MinIO SDK"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO")," provides ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Client SDK")," for ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Java"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Javascript"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Python"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Golang"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},".Net")," & ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Haskell")," providing simple APIs to access any Amazon S3 compatible object storage server."),(0,s.mdx)("p",null,"MinIO ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Java Client SDK")," needs ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Java 1.8")," as minimum requirement and can be added as dependency to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"maven"),"/",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"gradle"),". Below is sample from minio documentation to initialize MinIO Client and perform operations."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"MinIO Client SDK"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Create a minioClient with the MinIO Server name, Port, Access key and Secret key."),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"MinioClient")," minioClient ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"MinioClient"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"https://play.min.io"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token string"},'"Q3AM3UQ867SPQQA43P2F"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token string"},'"zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Check if the bucket already exists."),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"boolean")," isExist ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"bucketExists"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"asiatrip"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"if"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"isExist",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"System"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"out",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"println"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Bucket already exists."'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Make a new bucket called asiatrip to hold a zip file of photos."),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"makeBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"asiatrip"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Upload the zip file to the bucket with putObject"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"putObject"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"asiatrip"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},","),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"asiaphotos.zip"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token string"},'"/home/user/Photos/asiaphotos.zip"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"null"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"System"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"out",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"println"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"/home/user/Photos/asiaphotos.zip is successfully uploaded as asiaphotos.zip to `asiatrip` bucket."'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("p",null,"Below are few operations that can be performed with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinioClient"),":"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"519px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/5dff8dbf637c4b7dd1d383088bb9733e/b23ad/minio-java-sdk-operations.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"73.61963190184049%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA+wAAAPsAHpfpy9AAABiUlEQVQoz2WT65KDIAyFff8X7JQqCrRRnEp1RMvV7kpmqdt+PxgmkuRwiIUxhnMOCc75/X5/fTGOI2OsbdtrYlkWjBcxxpDw3uO6feET4QDGixACAFyvVyEEADjnXq/Xtm3HzqhOCMEYAwBjzLuz1nqeZ52IMX7L9t5PB7z37+RxHJVSwzAopR6PB26yBJQ9juMwDNM0hRByfE+WUnZdd7vd2rbt+75tWymltTZ3ttbivaSUWPSfYS7hvXfOYe1cfts2NBLPWGufiXVdd8MYY5fLpSzLpmkopUKInI8sy1KWJUnUdV1VFSGkqqriw9hjQyTG+H3mLZtSej6fKaVN0xBC+r7/eC2tNSHkdDoRQhhjKIFzXhzLx8TRz/wp2+6cM8ZYa51ze2cAQKu7rgMAKWUeA+T5fOJgKqWOivbkIaGUmqYJ1zwGecLuiXmej9bsstd1XZZlXdd5nnGvtT4aHkLQWmMchwz/jf2p6rpumqaua0opAAghOOc4JChSa11VFaWU/9F13W/yD8iDXFBm2iYKAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:'"MinIO Java Client SDK operations"',title:"MinIO Java Client SDK operations",src:"/static/5dff8dbf637c4b7dd1d383088bb9733e/b23ad/minio-java-sdk-operations.png",srcSet:["/static/5dff8dbf637c4b7dd1d383088bb9733e/222b7/minio-java-sdk-operations.png 163w","/static/5dff8dbf637c4b7dd1d383088bb9733e/ff46a/minio-java-sdk-operations.png 325w","/static/5dff8dbf637c4b7dd1d383088bb9733e/b23ad/minio-java-sdk-operations.png 519w"],sizes:"(max-width: 519px) 100vw, 519px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"MinIO Java Client SDK operations"),"\n  ")),(0,s.mdx)("p",null,"For complete list of operations, refer to the ",(0,s.mdx)(d,{href:"https://docs.min.io/docs/java-client-api-reference.html",mdxType:"ExternalLink"},"Java Client API Reference page"),"."),(0,s.mdx)("h2",{id:"adding-dependencies-needed-to-support-file-upload"},"Adding dependencies needed to support file upload"),(0,s.mdx)("p",null,"Below are couple of dependencies that are included for introducing file upload feature on top of existing application."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"pom.xml"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"xml"},(0,s.mdx)("pre",{parentName:"div",className:"language-xml"},(0,s.mdx)("code",{parentName:"pre",className:"language-xml"},(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token comment"},"\x3c!-- RESTEasy Multipart provider for file upload capability--\x3e")),(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"org.jboss.resteasy",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"resteasy-multipart-provider",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"exclusions"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"exclusion"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"org.jboss.spec.javax.annotation",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"jboss-annotations-api_1.3_spec",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"exclusion"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"exclusion"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"javax.activation",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"activation",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"exclusion"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"exclusions"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token comment"},"\x3c!-- To validated if uploaded file is actually of image type --\x3e")),(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"org.apache.tika",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"tika-core",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"1.24.1",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token comment"},"\x3c!-- MinIO Client SK --\x3e")),(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"io.minio",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"minio",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"7.0.2",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token comment"},"\x3c!-- Quarkus Template engine to render minio policy files --\x3e")),(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"io.quarkus",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"quarkus-qute",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"build.gradle"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"ruby"},(0,s.mdx)("pre",{parentName:"div",className:"language-ruby"},(0,s.mdx)("code",{parentName:"pre",className:"language-ruby"},"implementation",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'org.jboss.resteasy:resteasy-multipart-provider'")),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  exclude group",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'org.jboss.spec.javax.annotation'")),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token symbol"},"module"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'jboss-annotations-api_1.3_spec'")),"\n  exclude group",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'javax.activation'")),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token symbol"},"module"),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'activation'")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\nimplementation ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'org.apache.tika:tika-core:1.24.1'")),"\nimplementation ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'io.minio:minio:7.0.2'")),"\nimplementation ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'io.quarkus:quarkus-qute'"))))),(0,s.mdx)("p",null,"Upon ",(0,s.mdx)("strong",{parentName:"p"},"application startup")," with the above dependencies, their might be failure due to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"com.ctc.wstx.stax.WstxInputFactory not found")," ",(0,s.mdx)("strong",{parentName:"p"},"error"),". There is a defect ",(0,s.mdx)(d,{href:"https://github.com/quarkusio/quarkus/issues/7359",mdxType:"ExternalLink"},(0,s.mdx)("a",{parentName:"p",href:"https://github.com/quarkusio/quarkus/issues/7359"},"https://github.com/quarkusio/quarkus/issues/7359"))," reported and ",(0,s.mdx)("strong",{parentName:"p"},"still open")," as of drafting this article. To fix this we need to add the below dependency."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"pom.xml"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"xml"},(0,s.mdx)("pre",{parentName:"div",className:"language-xml"},(0,s.mdx)("code",{parentName:"pre",className:"language-xml"},"...\n...\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"\x3c!-- To fix https://github.com/quarkusio/quarkus/issues/7359 --\x3e"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"com.fasterxml.woodstox",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"woodstox-core",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"6.2.0",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n...\n..."))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"build.gradle"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"ruby"},(0,s.mdx)("pre",{parentName:"div",className:"language-ruby"},(0,s.mdx)("code",{parentName:"pre",className:"language-ruby"},(0,s.mdx)("span",{parentName:"code",className:"token operator"},"..."),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"..."),"\nimplementation ",(0,s.mdx)("span",{parentName:"code",className:"token string-literal"},(0,s.mdx)("span",{parentName:"span",className:"token string"},"'com.fasterxml.woodstox:woodstox-core:6.2.0'")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"..."),"\n",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"...")))),(0,s.mdx)("h2",{id:"create-image-upload-controller"},"Create Image Upload Controller"),(0,s.mdx)("p",null,"Controller class ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"CatalogueItemImageUploadController.java")," is introduced to handle image upload for specific catalogue item. ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"POST")," operation is handled by accepting the provided path param and the binary content received in the form of ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"InputStream"),"."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"CatalogueItemImageUploadController.java"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@POST"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Path"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"CatalogueControllerAPIPaths"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"UPLOAD_IMAGE",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Response")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"uploadImage"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@PathParam"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"value ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"sku"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"InputStream")," inputStream",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throws")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ResourceNotFoundException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Validate skuNumber by Getting catalogue item by sku. If not available, resource not found will be thrown."),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  catalogueCrudService",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getCatalogueItem"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"skuNumber",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Create temp file from the uploaded image input stream"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"File")," tempFile ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"span",className:"token function"},"createTempFile"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"skuNumber",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," inputStream",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Validate if the uploaded file is of type image. Else throw error"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Tika")," tika ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Tika"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String")," mimeType ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," tika",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"detect"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"tempFile",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"if")," ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token operator"},"!"),"mimeType",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"contains"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"image"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"{")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"    ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"ErrorCodes"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"ERR_IMAGE_UPLOAD_INVALID_FORMAT",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"format"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"File uploaded for SKU:%s is not valid image format"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," skuNumber",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"}")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Upload the file to storage service"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  storageService",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"uploadCatalogueImage"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"skuNumber",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," mimeType",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," tempFile",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Response"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"status"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Response",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"Status"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"CREATED",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"build"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"File")," ",(0,s.mdx)("span",{parentName:"span",className:"token function"},"createTempFile"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String")," skuNumber",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"InputStream")," inputStream",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"throws")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"ImageUploadException")," ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"{")),"  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"try")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"File")," tempFile ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"File"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"createTempFile"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'".tmp"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    tempFile",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"deleteOnExit"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"FileOutputStream")," out ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"FileOutputStream"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"tempFile",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"IOUtils"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"copy"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"inputStream",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," out",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"return")," tempFile",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"format"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Error occurred while creating temp file for uploaded image : %s"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,"Below is the overview of the implementation as per highlighted code:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Verify if the provided ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"sku")," is valid by calling ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"catalogueCrudService.getCatalogueItem(skuNumber)"),". ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"ResourceNotFoundException")," will be thrown If catalogue item doesn’t exist."),(0,s.mdx)("li",{parentName:"ul"},"Create ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"temp")," file from received ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"InputStream"),"."),(0,s.mdx)("li",{parentName:"ul"},"Validate if uploaded file is of valid image format using ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"Apache Tika"),"."),(0,s.mdx)("li",{parentName:"ul"},"Call ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"uploadCatalogueImage")," service method to upload image to storage service.")),(0,s.mdx)("h2",{id:"validate-if-file-uploaded-is-valid-image-format"},"Validate if file uploaded is valid image format"),(0,s.mdx)("p",null,"To ensure if uploaded file is of valid image format, file content validation is done with ",(0,s.mdx)(d,{href:"https://tika.apache.org/",mdxType:"ExternalLink"},"Apache Tika"),"."),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Apache Tika")," toolkit detects and extracts metadata and text from over a ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"thousand")," different ",(0,s.mdx)("strong",{parentName:"p"},"file types")," (such as PPT, XLS, and PDF). All of these file types can be parsed through a single interface, making Tika useful for ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"search engine indexing"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"content analysis"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"translation"),", and much more."),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Tika")," can detect and return the ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"mime type")," of the file which can be used to verify if it is of type image or not. ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"ImageUploadException")," is thrown if uploaded file is not of type image."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Detect File mimetype"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Validate if the uploaded file is of type image. Else throw error"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Tika")," tika ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Tika"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String")," mimeType ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," tika",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"detect"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"tempFile",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"if")," ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token operator"},"!"),"mimeType",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"contains"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"image"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"{")),"  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ErrorCodes"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"ERR_IMAGE_UPLOAD_INVALID_FORMAT",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"format"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"File uploaded for SKU:%s is not valid image format"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"mime-type")," detected and returned by Tika will be used to set the ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"content-type")," when putting the object to minio."),(0,s.mdx)("h2",{id:"handle-file-upload-with-minio-service-class"},"Handle file upload with MinIO Service class"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO"),"’s API is compatible with Amazon S3 API and it features around the features and functionalities that are provided by ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"AWS S3"),". "),(0,s.mdx)("h3",{id:"configure-minio-server-details"},"Configure MinIO server details"),(0,s.mdx)("p",null,"Before we start implementing the service, let’s configure minio server details along with credentials and bucket to hold catalogue item images in `configuration file."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"application.yaml"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"yaml"},(0,s.mdx)("pre",{parentName:"div",className:"language-yaml"},(0,s.mdx)("code",{parentName:"pre",className:"language-yaml"},(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"minio"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"use-ssl"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean important"},"false"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"host"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," localhost\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"port"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"9090"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"access-key"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," minioadmin\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"secret-key"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," minioadmin\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"catalogue-item-bucket"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," catalogue",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"-"),"item",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"-"),"images"))),(0,s.mdx)("p",null,"Inject these configuration properties to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIOConfiguration.java")," upon startup."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"MinIOConfiguration.java"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"package")," ",(0,s.mdx)("span",{parentName:"code",className:"token namespace"},"com",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"toomuch2learn",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"crud",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"catalogue",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"config"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"import")," ",(0,s.mdx)("span",{parentName:"code",className:"token namespace"},"io",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"quarkus",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"arc",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"config",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ConfigProperties"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"import")," ",(0,s.mdx)("span",{parentName:"code",className:"token namespace"},"lombok",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Data"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"import")," ",(0,s.mdx)("span",{parentName:"code",className:"token namespace"},"lombok",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"NoArgsConstructor"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Data"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@NoArgsConstructor"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@ConfigProperties"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"prefix ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"minio"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"MinIOConfiguration")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"boolean")," useSsl",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," host",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," port",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," accessKey",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," secretKey",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," catalogueItemBucket",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("h3",{id:"set-bucket-policy"},"Set bucket policy"),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Access to objects")," that are persisted to the bucket is done by ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"setting policy")," rules. ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Policy schema")," is same as AWS S3 policy schema definition and thus making minio compatible with AWS S3."),(0,s.mdx)("p",null,"Catalogue Item image that is uploaded has to be accessed in Frontend application. The only rule that needs to be applied is grant access ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"anonymously")," to every object under the bucket. This make the object accessible if you have the complete url to access it."),(0,s.mdx)("p",null,"To try out ",(0,s.mdx)(d,{href:"https://quarkus.io/guides/qute",mdxType:"ExternalLink"},"Quarkus Qute"),"` which is template engine that is designed specifically to meet the Quarkus needs. The usage of reflection is minimized to reduce the size of native images. The API combines both the imperative and the non-blocking reactive style of coding."),(0,s.mdx)("p",null,"Below is the policy template that is created in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"resources/templates")," folder with only one ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"value expression")," used which will be rendered with the ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"bucket name")," that is configured."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"policy-bucket-catalogueItemImage.json"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"json"},(0,s.mdx)("pre",{parentName:"div",className:"language-json"},(0,s.mdx)("code",{parentName:"pre",className:"language-json"},(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"Version"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"2012-10-17"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"Statement"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"Sid"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"PublicRead"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"Effect"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Allow"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"Principal"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"*"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"Action"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"s3:GetObject"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      ",(0,s.mdx)("span",{parentName:"span",className:"token property"},'"Resource"'),(0,s.mdx)("span",{parentName:"span",className:"token operator"},":"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"["),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"arn:aws:s3:::{catalogueItemBucket}/*"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"]")),"    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("h3",{id:"implementing-service-class"},"Implementing Service class"),(0,s.mdx)("p",null,"With ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIOConfiguration")," & Qute ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Engine")," injected to the service class, we can initialize ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinioClient")," object and start uploading the image to minio."),(0,s.mdx)("p",null,"Below are series of implementations steps for the highlighted lines in the code block:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Ensure the bucket to which the file has to be uploaded exists. If not, then create it."),(0,s.mdx)("li",{parentName:"ul"},"Define policy that has to be applied to the bucket."),(0,s.mdx)("li",{parentName:"ul"},"Set content size and type of the file to ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"PutObjectOptions"),"."),(0,s.mdx)("li",{parentName:"ul"},"Upload file by calling ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"minioClient.putObject"),".")),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"MinIOStorageService.java"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@ApplicationScoped"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"MinIOStorageService")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"implements")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"IStorageService")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Logger")," log ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"LoggerFactory"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getLogger"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"MalformedInputException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Inject"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Engine")," templateEngine",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Inject"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"MinIOConfiguration")," minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"MinioClient")," minioClient",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Template")," policyTemplate",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"initializeMinIOClient"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throws")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"RuntimeException")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"try")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Create instance of minio client with configured service details"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"        minioClient ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"            ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"MinioClient"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"(")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getHost"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getPort"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getAccessKey"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getSecretKey"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"isUseSsl"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Check and create if bucket is available to store catalogue images"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"createBucketIfNotExists"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"InvalidEndpointException")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"|")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"InvalidPortException")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"RuntimeException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"format"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"MinIO Service is not initialized due to invalid Host:%s or PORT:%s"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'""'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'""'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"RuntimeException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Error occurred while initializing MinIO Service"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"createBucketIfNotExists"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throws")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"try")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"        ",(0,s.mdx)("span",{parentName:"span",className:"token comment"},"// Check if the bucket already exists.")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"        ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"boolean")," isExist ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"bucketExists"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getCatalogueItemBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"        ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"if"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token operator"},"!"),"isExist",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"{")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token comment"},"// Prepare Anonymous readonly Policy to fetch objects from bucket without signed url")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          policyTemplate ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," templateEngine",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getTemplate"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"policy-bucket-catalogueItemImage.json"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String")," policy"),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," policyTemplate"),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                  ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"data"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"catalogueItemBucket"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getCatalogueItemBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"                  ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"render"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"}),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"makeBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getCatalogueItemBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"setBucketPolicy"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getCatalogueItemBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," policy",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Error occurred while creating bucket to store catalogue item images"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"/**"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"    * Method to upload the image to minio object store"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"    * @param skuNumber"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"    * @param contentType"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"    * @param image"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"    * @throws ImageUploadException"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"    */"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"uploadCatalogueImage"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," contentType",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"File")," image",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throws")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"try")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"if"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"minioClient ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"==")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"null"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token function"},"initializeMinIOClient"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Prepare options with size and content type"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"PutObjectOptions")," options ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"PutObjectOptions"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"image",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"length"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},","),(0,s.mdx)("span",{parentName:"span",className:"token operator"},"-"),(0,s.mdx)("span",{parentName:"span",className:"token number"},"1"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      options",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"setContentType"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"contentType",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Put the object to bucket"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      minioClient",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"putObject"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"(")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          minIOConfiguration",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getCatalogueItemBucket"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          skuNumber",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"FileInputStream"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"image",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          options",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"throw")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"format"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Error occurred while uploading catalogue item image for SKU: %s"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("h2",{id:"handling-exceptions"},"Handling Exceptions"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"ImageUploadException")," custom exception is added to wrap exceptions that are thrown during different phases of file upload implementation. Two new error codes are introduced when creating instance of this custom exception."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"ErrorCodes.java"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},"  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"/**\n    * Error code for Storage Exception\n    */"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"static")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"final")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," ERR_IMAGE_UPLOAD_FAILED ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1050"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"/**\n    * Error code for Invalid image format\n    */"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"static")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"final")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," ERR_IMAGE_UPLOAD_INVALID_FORMAT ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1060"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";")))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"ImageUploadException.java"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"extends")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"static")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"final")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"long")," serialVersionUID ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"1L"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," code",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," message",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Throwable")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"super"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"message",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," code",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," message",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"super"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"message",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"this"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"code ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," code",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," code",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," message",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Throwable")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"super"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"message",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"this"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"code ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," code",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCode"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"return")," code",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"ExceptionMapper")," is created to handle ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"ImageUploadException")," and return back appropriate ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"http response code")," and ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"message")," when handling file upload ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"content validation")," or exception occurred when handling ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"minio operations"),"."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"ImageUploadExceptionMapper.java"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Provider"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadExceptionMapper")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"implements")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ExceptionMapper"),(0,s.mdx)("span",{parentName:"code",className:"token generics"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"ImageUploadException"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Logger")," log ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"LoggerFactory"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getLogger"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadExceptionMapper"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Override"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Response")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"toResponse"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ImageUploadException")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      log",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"error"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"format"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Storage exception occurred: %s "'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getMessage"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n      ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ErrorResponse")," error ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ErrorResponse"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"if"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCode"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"==")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ErrorCodes"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"ERR_IMAGE_UPLOAD_INVALID_FORMAT",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          error",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getErrors"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"add"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"(")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"            ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Error"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"(")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"ErrorCodes"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"ERR_IMAGE_UPLOAD_INVALID_FORMAT",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              ",(0,s.mdx)("span",{parentName:"span",className:"token string"},'"Uploaded image is not of a valid format"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              e",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getMessage"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"            ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"return")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Response"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"status"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Response",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"Status"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"BAD_REQUEST",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"entity"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"error",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"build"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"      ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"else")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          error",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getErrors"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"add"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"(")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"            ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Error"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"(")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"ErrorCodes"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"ERR_IMAGE_UPLOAD_FAILED",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              ",(0,s.mdx)("span",{parentName:"span",className:"token string"},'"Error occurred while uploading image"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"              e",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getMessage"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"            ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"          ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"return")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Response"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"status"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Response",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"Status"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"INTERNAL_SERVER_ERROR",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"entity"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"error",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"build"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"      ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("h2",{id:"testing-with-quarkus"},"Testing with Quarkus"),(0,s.mdx)("p",null,"Integration tests for ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Quarkus")," are implemented with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Junit5"),", ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"RESTAssured")," and ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Test Containers"),". Refer to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Testing")," section in ",(0,s.mdx)(d,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful Microservice using Quarkus ")," article which includes details on setting up ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"dependencies")," and ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"testcontainer")," configurations."),(0,s.mdx)("h3",{id:"provisioning-minio-test-container"},"Provisioning Minio Test Container"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"TestContainers")," does not have supporting class for ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO"),", Instead provides support for provisioning any docker image with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"GenericContainer")," class which we will be using for testing ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Image Upload")," endpoint. "),(0,s.mdx)("p",null,"Custom configuration class ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIOTestResource")," is created by extending ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"QuarkusTestResourceLifecycleManager")," and implementing ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"start")," and ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"stop")," lifecycle methods for defined ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"GenericContainer"),"."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"QuarkusTestResourceLifecycleManager.java"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"MinIOTestResource")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"implements")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"QuarkusTestResourceLifecycleManager")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"GenericContainer")," minio",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"final")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," ACCESS_SECRET_KEY ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"minioadmin"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"private")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"final")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"int")," EXPOSED_PORT ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"9000"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Override"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Map"),(0,s.mdx)("span",{parentName:"code",className:"token generics"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"start"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    minio\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      ",(0,s.mdx)("span",{parentName:"span",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"GenericContainer"),(0,s.mdx)("span",{parentName:"span",className:"token generics"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"minio/minio"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),"        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"withExposedPorts"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"EXPOSED_PORT",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," EXPOSED_PORT",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"withEnv"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"MINIO_ACCESS_KEY"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ACCESS_SECRET_KEY",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"withEnv"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"MINIO_SECRET_KEY"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ACCESS_SECRET_KEY",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"withCommand"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"server"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"/data"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"        ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"waitingFor"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Wait"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"forHttp"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"/minio/health/ready"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")")),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"        ",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"withLogConsumer"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Slf4jLogConsumer"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"LoggerFactory"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getLogger"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"MinIOTestResource"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"\n    minio",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"start"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// Map environment variables with the started container's exposed port"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Map"),(0,s.mdx)("span",{parentName:"code",className:"token generics"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"String"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))," map ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"HashMap"),(0,s.mdx)("span",{parentName:"code",className:"token generics"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"    map",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"put"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token string"},'"minio.port"'),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"span",className:"token class-name"},"Integer"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"toString"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),"minio",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"span",className:"token function"},"getFirstMappedPort"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},";")),"    map",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"put"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"minio.access-key"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ACCESS_SECRET_KEY",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n    map",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"put"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"minio.secret-key"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ACCESS_SECRET_KEY",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"return")," map",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Override"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"stop"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      minio",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"stop"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,"Below are some insights on highlighted code:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("code",{parentName:"li",className:"language-text"},"waitingFor")," http option is added to ensure container is provisioned and ready to accept requests before starting up test execution"),(0,s.mdx)("li",{parentName:"ul"},(0,s.mdx)("code",{parentName:"li",className:"language-text"},"withLogConsumer")," option is added for debugging purpose to capture the container logs to the test console."),(0,s.mdx)("li",{parentName:"ul"},"Random Port will be created by ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"TestContainer")," which will be mapped to accept request. This mapped port can be retrieved with ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"minio.getFirstMappedPort()"),". Configuration param that is mapped with port ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"9090")," will be replaced with the mapped port. ")),(0,s.mdx)("h3",{id:"testing-image-upload-rest-endpoint"},"Testing Image Upload REST endpoint"),(0,s.mdx)("p",null,"Test class ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"RestAssuredCatalogueImageUploadTest")," is defined to handle all tests against image upload endpoint. It imports classes from JUnit5, REST-assured and Hamcrest to setup, access and validate image upload API endpoint."),(0,s.mdx)("p",null,"Below are the tests that are included as part of the Test class:"),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Upload catalogue item image for valid SKU"),(0,s.mdx)("li",{parentName:"ul"},"Upload catalogue item image for invalid SKU"),(0,s.mdx)("li",{parentName:"ul"},"Upload file which is not a valid image format")),(0,s.mdx)("p",null,"With the common reusable code separated into ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"BaseTest"),", implementing test methods will be easy by following the Given\\When\\Then syntax."),(0,s.mdx)("p",null,"As all the tests are performed on the single API endpoints, they all share the same API Base URI. REST-assured provides a convenient way to configure this base uri to be used by all the tests."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"RestAssuredCatalogueCRUDTest.java"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@BeforeEach"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"setURL"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"RestAssured"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"baseURI ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"http://[::1]:8081/api/v1"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},(0,s.mdx)("strong",{parentName:"strong"},"Note")),": Rather than defining the baseURI before each test, we can configure static block and assign the value just once. But this is not being honored and unclear why. To focus on the overall implementation, this is parked aside for further analysis."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Static block not%honored"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"static")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"RestAssured"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"baseURI ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"http://localhost:8080/api/v1"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,"Below is implementation of ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Upload catalogue item image for valid SKU"),":"),(0,s.mdx)("p",null,"Multiple operations are handled for image upload request. Create instance of CatalogueItem and send request to create it. Access get request passing ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"sku")," and validating if we are receiving ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"200")," Status and finally post request to image upload endpoint with input stream of image file available in classpath."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"RestAssuredCatalogueImageUploadTest.java"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@Test"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@DisplayName"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Test upload Catalogue Item image"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"public")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"void")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"test_uploadCatalogueItemImage"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"try")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"String")," skuNumber ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"prepareRandomSKUNumber"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"    ",(0,s.mdx)("span",{parentName:"span",className:"token comment"},"// Create Catalogue Item")),"    ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"postCreateCatalogueItem"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token function"},"prepareCatalogueItem"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"then"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"assertThat"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"spec"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token function"},"prepareResponseSpec"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"201"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"and"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"assertThat"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"body"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"id"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"greaterThan"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"0"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"    ",(0,s.mdx)("span",{parentName:"span",className:"token comment"},"// Get Catalogue Item")),"    ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"given"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"pathParam"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"sku"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"when"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"get"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"/{sku}"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"then"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"assertThat"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"spec"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token function"},"prepareResponseSpec"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token number"},"200"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"    ",(0,s.mdx)("span",{parentName:"span",className:"token comment"},"// Load file from resource to input stream")),"    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"InputStream")," image ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"=")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"getClass"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getClassLoader"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getResourceAsStream"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"crud.png"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"    ",(0,s.mdx)("span",{parentName:"span",className:"token comment"},"// Post image upload for specific SKU")),"    ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"given"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"contentType"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"application/octet-stream"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"body"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"image",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"pathParam"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"sku"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," skuNumber",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"when"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"post"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"/{sku}/image"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"then"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"assertThat"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"spec"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token function"},"prepareResponseSpec"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Response",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"Status"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),"CREATED",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getStatusCode"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"catch"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"Exception")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"fail"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Error occurred while uploading catalogue item image endpoint"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," e",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,"Going through each test method would make this article even lengthy than what it is now. To cut short, Refer to ",(0,s.mdx)(d,{href:"https://github.com/2much2learn/article-may10-uploading-files-to-cloud-native-object-store-from-quarkus-restful-api/blob/master/src/test/java/com/toomuch2learn/crud/catalogue/RestAssuredCatalogueImageUploadTest.java",mdxType:"ExternalLink"},"source code")," for complete implementation of each test method."),(0,s.mdx)("h2",{id:"packaging-and-running-quarkus-application"},"Packaging and Running Quarkus Application"),(0,s.mdx)("p",null,"Application generated from ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"code.quarkus.io")," includes ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"quarkus")," plugin with both Maven & Gradle. This plugin provides numerous options that are helpful during development mode and for packaging the application either in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"JVM")," or ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Native")," mode."),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Native")," mode creates executables make Quarkus applications ideal for containers and serverless workloads. Ensure ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"GraalVM >= v19.3.1")," is installed and ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"GRAALVM_HOME")," is configured."),(0,s.mdx)("p",null,"Below are series of steps for packaging and running quarkus application with Maven & Gradle."),(0,s.mdx)("h3",{id:"jvm-mode"},"JVM Mode"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Maven"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ mvn clean package\n\n$ java -jar target/catalogue-crud-1.0.0-SNAPSHOT-runner.jar"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Gradle"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ gradle clean quarkusBuild --uber-jar\n\n$ java -jar build/catalogue-crud-1.0.0-SNAPSHOT-runner.jar"))),(0,s.mdx)("h3",{id:"native-mode"},"Native Mode"),(0,s.mdx)("p",null,"Create a native executable by executing below command"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Maven"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ mvn clean package -Pnative\n\n$ ./target/catalogue-crud-1.0.0-SNAPSHOT-runner"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Gradle"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ gradle clean buildNative\n\n$ ./build/catalogue-crud-1.0.0-SNAPSHOT-runner"))),(0,s.mdx)("p",null,"Below is sample output of build creating native package and starting it up:"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/0aa8eb84271f51b930e4c0fef8357fa7/0d1a4/quarkus-mvn-native-package.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"72.39263803680981%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA+wAAAPsAHpfpy9AAACG0lEQVQoz22S24rbQBBE9SMh3rVlSSPNaO6aS89dsiCQ5P//Jjhe8pBdqIeioeo0TXfs+I2VHBUe5UIMWzWXTnOjNg9EayT4tK4IE7QQhMm0YIQxwmSclwHNHWs/J2veLL96hcGYmlgwPDpXq3ZAN820pkIO8zzO8/zMPyv+tpDO7D+YBxaDKBk7Nyh5IeQ7Jd/WZeaCC7UyToVchWBSCa2ZVEwqrjSXqlPlFDGuEUgCDG52ZgGHEyBvhfchZR+TCxFihpgsAKScSg25KGM7B7Hux348QsqbdcZ5B0FvVmqzOW88yO3DbNZt1iljlbHGe2VMl2pLtTkI9Xik2iwESHmaF7kZaSzERLnYnL/eh7db/9Llertcb+/9vctt3x8npOxCDLmEXPbz3M+ztD2V5mN6DlO2HqiQTKqZrHilmLJ+nJ7k9jghplhKqg1iDrmkWmOpFkJIWaiNS72s9D6h+4T6Eb3MbRi7XFtuzXp/PM79cYZUYq5CaxuiMjaWyoS0PrzWfu/v/3S9D8+1U9uth/Y423H6mGOphFLjQRubahNKOwj9OF3vw3/qcmul7Q7gOF/knEojlLoYjYdYCpPKwpP83n8Kp/2IrWnv03HE4zA5+1pnjC2EWEpuTRnjY0IYf0Gm+y8EbgIzSTFSOnE2cb5ysXLBpH5d+PnbmNyG8Yuw9sE4b51Xm2FCcqHQgodpHtCHbsP4dus/k/8AwD6sP0PGZXwAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Building native executable",title:"Building native executable",src:"/static/0aa8eb84271f51b930e4c0fef8357fa7/a6d36/quarkus-mvn-native-package.png",srcSet:["/static/0aa8eb84271f51b930e4c0fef8357fa7/222b7/quarkus-mvn-native-package.png 163w","/static/0aa8eb84271f51b930e4c0fef8357fa7/ff46a/quarkus-mvn-native-package.png 325w","/static/0aa8eb84271f51b930e4c0fef8357fa7/a6d36/quarkus-mvn-native-package.png 650w","/static/0aa8eb84271f51b930e4c0fef8357fa7/e548f/quarkus-mvn-native-package.png 975w","/static/0aa8eb84271f51b930e4c0fef8357fa7/0d1a4/quarkus-mvn-native-package.png 1036w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Building native executable"),"\n  ")),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/777cc6496f7cd08c7246703f080eaf76/f32b7/quarkus-native-executable.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"19.631901840490798%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAAo0lEQVQI12WNSW6EQAwA+UqgTdt47RUE0sz/fxVl5hipDqW61JLOtrXYiiUPsAbewfseM9czR8/RvwUtNEKjiId4eG1svrCYqP9hzmqsinQQs5ipBzGvCVaANcHPP5adOB+cmVHkUEMWNtcoGoXVSTRl2jKmjICUPrLTAUiAtDyv9/N61zFLG7WPOmYdc173dT/X/fTzKp9Y+rBS25jR+vdBor+v+yo0HrMWLgAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Running executable application",title:"Running executable application",src:"/static/777cc6496f7cd08c7246703f080eaf76/a6d36/quarkus-native-executable.png",srcSet:["/static/777cc6496f7cd08c7246703f080eaf76/222b7/quarkus-native-executable.png 163w","/static/777cc6496f7cd08c7246703f080eaf76/ff46a/quarkus-native-executable.png 325w","/static/777cc6496f7cd08c7246703f080eaf76/a6d36/quarkus-native-executable.png 650w","/static/777cc6496f7cd08c7246703f080eaf76/e548f/quarkus-native-executable.png 975w","/static/777cc6496f7cd08c7246703f080eaf76/f32b7/quarkus-native-executable.png 1136w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Running executable application"),"\n  ")),(0,s.mdx)("h4",{id:"native-build-are-more-memory--cpu-intensive"},"Native build are more memory & CPU intensive"),(0,s.mdx)("p",null,"GraalVM-based native build are more memory & CPU intensive than regular pure Java builds. "),(0,s.mdx)("p",null,"Below is ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"htop")," stats when packaging native executable:"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"628px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/b42e1abac2f62462ae48ddfd5d980ef4/3d84d/htop-nativeimage-build.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50.306748466257666%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAB9klEQVQozx2RSW7bMAAA9YqikRRZ3G3LkkhapChSlGzLWbpcC6RI4CVIUqC3Ar31H02cpD300HcWLjCHwVwnINlsLGegJFDQI5zCkqaaMJWRaT7mOZIUyv+dHyWtCNUZZuNCyICVPPN8VKO0JUcsATWNL+BkPRsXctYI2CLQ4lQj0BDY4mQA2WXBJlnORUB1lXUSzhEyBNUE1ZjoSW5Y5QQRnNQC1DlwJe050gyaPPUFMQVirJAyIEwUjM8iUsS0TFh+SnnCBCoFnRPKYaFhUSKphHBjYUBWYczx6QS+JWUmg2gPwmsQ7mH8BUdbFN/ieIuiWxjvYHSHo3uWbD7EGxc+wPCehXfkdIOSLQm/wuknHqDXLX3ao1/7kz9b8LJLfu+ix5vw+ebk6SZ93sDDBh1+0J/f0pdr+LRFr7uTw+fo8erN36vJ949BqxZDd9mbAYbMyLacKmx7VLm0alSzblpfK71shyo3Vi16uzp+kWw0x7mRQe2s7bxpLaC0MiYTHHkDrB5Zxb2bd5rXyna9UHNtrfE2rQg0dGRR3orA+m44v1isVgAT3dhCztGyBc6MXC37vl5aWet+tZZKGefdwqcGwYYmHcy9CLrl6vzd++WwBphY78tK4bMeLGzSNWoY7LnXzg5nl8qYtl92w2JkEHAk6WHeiX9TyX1SkxUQkQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"htop stats when building native executable",title:"htop stats when building native executable",src:"/static/b42e1abac2f62462ae48ddfd5d980ef4/3d84d/htop-nativeimage-build.png",srcSet:["/static/b42e1abac2f62462ae48ddfd5d980ef4/222b7/htop-nativeimage-build.png 163w","/static/b42e1abac2f62462ae48ddfd5d980ef4/ff46a/htop-nativeimage-build.png 325w","/static/b42e1abac2f62462ae48ddfd5d980ef4/3d84d/htop-nativeimage-build.png 628w"],sizes:"(max-width: 628px) 100vw, 628px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"htop stats when building native executable"),"\n  ")),(0,s.mdx)("p",null,"If native executable generation fails with below error message, then consider configuring ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"native-image-xmx")," in application.yaml"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Stacktrace"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ mvn clean verify -Pnative\n\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"ERROR",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")," Caused by: java.lang.RuntimeException: Image generation failed.\nExit code was ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"137")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"which")," indicates an out of memory error. \nConsider increasing the Xmx value ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," native image generation by \nsetting the ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"quarkus.native.native-image-xmx"')," property"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"application.yaml"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"yaml"},(0,s.mdx)("pre",{parentName:"div",className:"language-yaml"},(0,s.mdx)("code",{parentName:"pre",className:"language-yaml"},(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"quarkus"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":"),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"# configuration options that can affect how the native image is generated"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"native"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":"),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"# The maximum Java heap to be used during the native image generation - 4 Gig"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token key atrule"},"native-image-xmx"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},":")," 4g"))),(0,s.mdx)("h4",{id:"supporting-native-in-our-application"},"Supporting native in our application"),(0,s.mdx)("p",null,"There are quite some hurdles that we can come across if we build and run native package without going through ",(0,s.mdx)(d,{href:"https://quarkus.io/guides/writing-native-applications-tips",mdxType:"ExternalLink"},"Tips for Writing Native Applications")," documentation."),(0,s.mdx)("p",null,"One such hurdle I came across is with below error message when testing the application after running native build:"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Stacktrace"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"Caused by: org.simpleframework.xml.core.PersistenceException: \n  Constructor not matched ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"for")," class io.minio.messages.LocationConstraint\n        at io.minio.Xml.unmarshal",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"Xml.java:55",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        at io.minio.MinioClient.updateRegionCache",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"MinioClient.java:1257",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),"\n        at io.minio.MinioClient.getRegion",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),"MinioClient.java:1279",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")))),(0,s.mdx)("p",null,"When building a native executable, ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"GraalVM")," operates with a closed world assumption. It analyzes the call tree and removes all the classes/methods/fields that are not used directly."),(0,s.mdx)("p",null,"The elements used via reflection are not part of the call tree so they are dead code eliminated (if not called directly in other cases). To include these elements in your native executable, you need to register them for reflection explicitly."),(0,s.mdx)("p",null,"Classes that need to be serialized should be registered with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"@RegisterForReflection")," annotation or should be registered in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"resources/reflection-config.json")," if they are part of third-party jar."),(0,s.mdx)("p",null,"MinIO Java Client SDK uses ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"org.simpleframework.xml")," library to prepare xml for request and parse xml that is received in response. This library heavily relies on reflection which is not supported with native build. It took ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"multiple iterations")," to build and test native build to identify the classes that should be registered in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"reflection-config.json")," as these are part of third-part jar"),(0,s.mdx)("p",null,"Below is the final set of classes that are registered to successfully test image upload to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"REST endpoint")," and put the object in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO Server")," with native build."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Registering in JSON file"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"json"},(0,s.mdx)("pre",{parentName:"div",className:"language-json"},(0,s.mdx)("code",{parentName:"pre",className:"language-json"},(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"["),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"com.toomuch2learn.crud.catalogue.error.ErrorResponse"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"com.toomuch2learn.crud.catalogue.error.Error"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.messages.LocationConstraint"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"org.simpleframework.xml.core.TextLabel"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.messages.InitiateMultipartUploadResult"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"org.simpleframework.xml.core.ElementLabel"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"org.simpleframework.xml.core.ElementListLabel"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.messages.ErrorResponse"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.ErrorCode$ErrorCodeConverter"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.messages.CompleteMultipartUpload"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.messages.Part"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicConstructors"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicMethods"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allDeclaredFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"allPublicFields"')," ",(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"]")))),(0,s.mdx)("p",null,"This list is ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"extensive")," for sure and can be replaced by implementing Quarkus Extension and configuring classes registered in reflection-config.json in Quarkus Extension. Checkout ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO Quarkus Extension")," section for more details."),(0,s.mdx)("p",null,"The final order of business is to make the configuration file known to the ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"native-image")," executable by adding the proper configuration to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"application.yaml")),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"yaml:application.yaml"},(0,s.mdx)("pre",{parentName:"div",className:"language-yaml:application.yaml"},(0,s.mdx)("code",{parentName:"pre",className:"language-yaml:application.yaml"},"quarkus:\n\n  # configuration options that can affect how the native image is generated\n  native:\n\n    # Additional arguments to pass to the build process\n    additional-build-args: >\n      -H:ResourceConfigurationFiles=resources-config.json,\n      -H:ReflectionConfigurationFiles=reflection-config.json"))),(0,s.mdx)("h2",{id:"testing-image-upload-api-via-postman"},"Testing Image Upload API via Postman"),(0,s.mdx)("p",null,"API testing tool ",(0,s.mdx)(d,{href:"https://www.postman.com/",mdxType:"ExternalLink"},"Postman")," is one of the most popular tools available. The ease of Accessibility, creating environments & collections to persist test cases which validate the response status & body and Automated testing with ",(0,s.mdx)(d,{href:"https://www.npmjs.com/package/newman",mdxType:"ExternalLink"},"Newman")," which is a command-line collection runner for Postman."),(0,s.mdx)("p",null,"Below are the tests we execute to verify the application that is started. Ensure to add header ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Content-Type: application/json")," which is needed for most of the tests."),(0,s.mdx)("p",null,"⭐ Download and refer to complete ",(0,s.mdx)(d,{href:"https://github.com/2much2learn/article-may10-uploading-files-to-cloud-native-object-store-from-quarkus-restful-api/blob/master/Quarkus_JPA_H2_CatalogueCRUD.postman_collection.json",mdxType:"ExternalLink"},"Postman Collection")," for all the below tests."),(0,s.mdx)("h3",{id:"application-health"},"Application Health"),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"SmallRye Health")," extension exposes ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"/health")," endpoint which will expose the status of the application."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Http Method"),": GET - ",(0,s.mdx)("strong",{parentName:"p"},"Request Url"),": http://localhost:8080/health"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"623px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/18a39cab2486dd348c7f8d394252726e/6114d/postman_health.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"50.920245398773%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA+wAAAPsAHpfpy9AAABDklEQVQoz42P227DMAiG8/5P2abd5sYnHJ+CbWBKcrNuVbVPnxAX/CAmzKGC3sCOFE579L3hIGJmecsEEbRenDElpd2cUlzXdY0xllK2t0xKKa01ACxa3+73eZ6v83y9Xi+Xy7Is1lptjLFWv2KCANbaEAIA+IMQgnNuPQCAnGIJvr1i8t4r9aWNds45743RAF4pdSattTmu1S2vfxYR7KNuteXUnC2l5ooizEwidDTMwkSDadCzkzAXRBZuKcbPD9xqp3EkiJh2zno0LCw/nES4YNsX79Ncl0d9KOXzTaeQ0azVp82nLWS0sfYxfoUlI/bRe8PeG/VGWMcYg0ie7/x1v4y9l1qIzq0n/B+/AT94Q+3q6n0FAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Application Health",title:"Application Health",src:"/static/18a39cab2486dd348c7f8d394252726e/6114d/postman_health.png",srcSet:["/static/18a39cab2486dd348c7f8d394252726e/222b7/postman_health.png 163w","/static/18a39cab2486dd348c7f8d394252726e/ff46a/postman_health.png 325w","/static/18a39cab2486dd348c7f8d394252726e/6114d/postman_health.png 623w"],sizes:"(max-width: 623px) 100vw, 623px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Application Health"),"\n  ")),(0,s.mdx)("h3",{id:"add-catalogue-item"},"Add Catalogue Item"),(0,s.mdx)("p",null,"Below is the postman requests which we will use to create Catalogue Items. One of the Catalogue item will be used to update it in the later tests."),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Http Method"),": POST - ",(0,s.mdx)("strong",{parentName:"p"},"Request Url"),": http://localhost:8080/api/v1/"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Request Body"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"json"},(0,s.mdx)("pre",{parentName:"div",className:"language-json"},(0,s.mdx)("code",{parentName:"pre",className:"language-json"},(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\t",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"sku"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"CTLG-123-0001"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\t",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"name"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"The Avengers"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\t",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"description"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Marvel\'s The Avengers Movie"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\t",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"category"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Movies"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\t",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"price"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"0.0"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\t",(0,s.mdx)("span",{parentName:"code",className:"token property"},'"inventory"'),(0,s.mdx)("span",{parentName:"code",className:"token operator"},":")," ",(0,s.mdx)("span",{parentName:"code",className:"token number"},"0"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/40529c67ef1129b77439763bdd911ecb/798d4/postman_create_catalogue.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.901840490797547%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5klEQVQY042QyU4EMQxE+///EokBenrLYiedpfNQMiME4gCHJ/lQdpVrMsbQ2fcday0qgqoSQngSv81/M63rynEcLOvK+zzzersxz/Mw2LaNfV04tofmP0zWOaIKKUWSGoJZyDkP0nlSolJiGKltVHxQfFSkJ0ontRRyp+tTYupvRu85tSB7pqQKNFp7Aly1Yu7vOGtxzmGcHfV475Fej3hyNy+VqV/Xu2V5Ofh4A/WNGBpRG7W2r+N9sXftnUNEEPEjdZ+DOEpOQzcZ5/D2xGxKyBepNs7ym3pdpL50PT74ybCltYtPuxPQocunqkUAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Create Catalogue Item",title:"Create Catalogue Item",src:"/static/40529c67ef1129b77439763bdd911ecb/a6d36/postman_create_catalogue.png",srcSet:["/static/40529c67ef1129b77439763bdd911ecb/222b7/postman_create_catalogue.png 163w","/static/40529c67ef1129b77439763bdd911ecb/ff46a/postman_create_catalogue.png 325w","/static/40529c67ef1129b77439763bdd911ecb/a6d36/postman_create_catalogue.png 650w","/static/40529c67ef1129b77439763bdd911ecb/e548f/postman_create_catalogue.png 975w","/static/40529c67ef1129b77439763bdd911ecb/798d4/postman_create_catalogue.png 976w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Create Catalogue Item"),"\n  ")),(0,s.mdx)("h3",{id:"upload-catalogue-item-image"},"Upload Catalogue Item Image"),(0,s.mdx)("p",null,"Upload image to the created Catalogue Item by passing the SKU number used to create it"),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Http Method"),": POST - ",(0,s.mdx)("strong",{parentName:"p"},"Request Url"),": http://localhost:8080/api/v1/{sku}/image"),(0,s.mdx)("p",null,(0,s.mdx)("strong",{parentName:"p"},"Note"),": ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"binary")," option to be choosed with valid image selected as shown below"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"648px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/ef993800850d33bb14f167bada579547/3996e/postman-upload-image.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"33.12883435582822%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAA+wAAAPsAHpfpy9AAAAzklEQVQY05WOyY7DMAxD/f9fmaBuBoXlVdZie5IOal+KYi59JxISQRoA8N4751T1940x+bAfGAAIIQBAjDHnnFKKMaaUll4254z/Yay1K2yt3bZt3/dtcrPW3o9t2uM4QgjOOQBwznnvlzCISESrTVWxlJiTdEngHu6uKnPCa4WIlFJUNYSAiK01IyKtNZosgVRFqD6O8rNrRRYhLMy8rut/jHGe56tZVVd4jMHMtVZirsyirbUuIp0rEfXeiajWel3Xc2JSLjnnMcbze/4AoROQtu085I8AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Upload Image",title:"Upload Image",src:"/static/ef993800850d33bb14f167bada579547/3996e/postman-upload-image.png",srcSet:["/static/ef993800850d33bb14f167bada579547/222b7/postman-upload-image.png 163w","/static/ef993800850d33bb14f167bada579547/ff46a/postman-upload-image.png 325w","/static/ef993800850d33bb14f167bada579547/3996e/postman-upload-image.png 648w"],sizes:"(max-width: 648px) 100vw, 648px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Upload Image"),"\n  ")),(0,s.mdx)("p",null,"If request is successful with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"HTTP 201")," status code, access the uploaded file with minio url ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"http://localhost:9090/catalogue-item-images/{SKU}"),". This is possible because of ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"anonymous policy")," applied on the bucket."),(0,s.mdx)("h3",{id:"upload-catalogue-item-image-with-invalid-sku"},"Upload Catalogue Item Image with invalid SKU"),(0,s.mdx)("p",null,"Upload image for invalid SKU number"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/438a5586147c8712366343d7ac5d6996/a0209/postman-upload-invalid-sku.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.05521472392638%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA+wAAAPsAHpfpy9AAABcUlEQVQoz32QbcvdMAhA+///3j4NNu7W9rZN07wYTUximo7ecR82eLbDQRRE0WFZFqWUtVYpNb+YxnGa5nXd5vk5TZNSyjlnrTXG2L8ZAgARIaL3nogCBB8gRTKHRgwA4AEQkYhijPDKmTm9GCLn34X3nnO+pwRIwR/jdwJLMQbviIiZETGlVGs93wx1/IbrytsmxrTjqKXUKuWOVarclFxrEZFcynme1x8M+PULzM+4LEXrcuxSykdTf3P23kXarvnYo1a8LdW51MpgnyOG+2wAAMKA6J27D+KbnKLUKq1JznVded9Jb2l9FmOi5MEYs22bNcY5p/XhAJTWgeiwFhCjM/1s1z8Y2tm5lMopOysYekpXih/2FE/Cz400yNmqSL/6CZ4fD1ifhzUpEN+PJknpKvkTpV6HHqS1KrVfvXnHPx5p/Em7Vsqtq9026w2ADegwuOAMWO1TwGDBWXSP6d6cMovUU+o9MvPF6cpv+X/+AoMedYCpG+LnAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Upload Image for invalid sku",title:"Upload Image for invalid sku",src:"/static/438a5586147c8712366343d7ac5d6996/a6d36/postman-upload-invalid-sku.png",srcSet:["/static/438a5586147c8712366343d7ac5d6996/222b7/postman-upload-invalid-sku.png 163w","/static/438a5586147c8712366343d7ac5d6996/ff46a/postman-upload-invalid-sku.png 325w","/static/438a5586147c8712366343d7ac5d6996/a6d36/postman-upload-invalid-sku.png 650w","/static/438a5586147c8712366343d7ac5d6996/a0209/postman-upload-invalid-sku.png 725w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Upload Image for invalid sku"),"\n  ")),(0,s.mdx)("h3",{id:"uploading-unsupported-image-format"},"Uploading Unsupported Image Format"),(0,s.mdx)("p",null,"Upload image for valid SKU number with a pdf file"),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/0f30b000b13b52bb4f9166ad15685c8f/f8067/postman-image-upload-invalid-file.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"58.282208588957054%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA+wAAAPsAHpfpy9AAABk0lEQVQoz3WQ2W7cMAxF/f9/2L50mmDs0WaRWkhqD8ZppulDDw4uLkCJELRprQHAOfd4PJRSjwuttVb6uIq/AIBXvtiMMQCgP1F633dttFL60EprfRyHc+5101qL39iImUUgBBZhYoxBCuP9N+h3ZooxBEQWSSkxUYyx1dpbe9r7RgFrSgQgOUspOWfKOadYnjulClNKpRRiJpH1Lxvc3sLt1vZ9Is615hjzL199rVnKJJpE68rPY1u2NjmXjIkRpZSAgZnHGL339mlrrdamVDLGm8PaI9zf8nkGSZvW6kQ8AY0153ma63sR4PQ+eVdiWM/nzBnjBJiIA3F4P2udY2zWuRgwx4gxcimZiES4SBYphVurY63/uVEpc/TibNVqIEiEldPKcVG6SlopfDNehpXjRNhIZK41vKfbL/j5Q+/3XcGu8P3w1gVtgnHh0Hh/eM5EiXIiijlm6ff7lpj77A1hONutmedZAMlDtJ4B2SN7yCfQCQVQrhF7YMBhzJaZem9rzdXqH2t52r7yZS3fRrJG/wA1168bWpR09QAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"Upload with invalid file",title:"Upload with invalid file",src:"/static/0f30b000b13b52bb4f9166ad15685c8f/a6d36/postman-image-upload-invalid-file.png",srcSet:["/static/0f30b000b13b52bb4f9166ad15685c8f/222b7/postman-image-upload-invalid-file.png 163w","/static/0f30b000b13b52bb4f9166ad15685c8f/ff46a/postman-image-upload-invalid-file.png 325w","/static/0f30b000b13b52bb4f9166ad15685c8f/a6d36/postman-image-upload-invalid-file.png 650w","/static/0f30b000b13b52bb4f9166ad15685c8f/f8067/postman-image-upload-invalid-file.png 726w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"Upload with invalid file"),"\n  ")),(0,s.mdx)("h2",{id:"stopping-services"},"Stopping services"),(0,s.mdx)("p",null,"Follow commands sequentially listed in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Stopping Services")," section from ",(0,s.mdx)(d,{href:"https://2much2learn.com/restful-event-driven-microservice-using-quarkus-jpa-kafka/",mdxType:"ExternalLink"},"Creating RESTful API + Event-driven Microservice with Quarkus")," article along with the below command to stop ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"minio"),". Listing them here for reference."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Stop Postgres container"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," stop pgdocker"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Bring Kafka Cluster down"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker-compose")," -f docker-compose/kafka-docker-compose.yaml down"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Bring Graylog service down"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker-compose")," -f docker-compose/graylog-docker-compose.yaml down"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Bring Jaeger Services up down"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker-compose")," -f docker-compose/jaeger-docker-compose.yaml down"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Stop MinIO container"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," stop minio"))),(0,s.mdx)("h2",{id:"cleanup"},"Cleanup"),(0,s.mdx)("p",null,"As part of this exercise, lot of containers and networks gets created. These are useful when working on this application or needing these for different applications."),(0,s.mdx)("p",null,(0,s.mdx)("figure",{parentName:"p",className:"gatsby-resp-image-figure",style:{}},"\n    ",(0,s.mdx)("span",{parentName:"figure",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}},"\n      ",(0,s.mdx)("a",{parentName:"span",className:"gatsby-resp-image-link",href:"/static/2ba7526a63599cfdb98dfee311acb055/d69c4/docker-created-containers.png",style:{display:"block"},target:"_blank",rel:"noopener"},"\n    ",(0,s.mdx)("span",{parentName:"a",className:"gatsby-resp-image-background-image",style:{paddingBottom:"39.877300613496935%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAA+wAAAPsAHpfpy9AAABXUlEQVQY0y2QCXKEIBQFvclURBYVdEQB2RRU3FKV+x8nZSYH6N/9fuZ+bn0lwFuVlt7NqFOg4agTejsb7Zk0hEsV09sG2PY+LnwQAOEcIoBwdp73uiaIyBzied0VpV8AQIS1sb0Qc4y0YdpaP00QY20dF5LUtKKswCQ77u+YUoGJCyGdF67pCxQFJtp5LtUUF9q22nkfIiKldr4bBCorUtWPeT+vdJwQl9q6sK6DGpt3R2oqjR2tM87T9m38ZJwvMDHOc6FKyirGCkSy7TjjtkFSujls+8EHwT6wNmLU2vm6aVyIo7U5RMZPb96/cvC/+bi/t/2ApJxC3M+L1PUrB5/sXso5LrRpfYjG+wLhP7MsKSsp+89e0/5snubjukvKvgr4wH+/cXOoH3h5shHWfuqlajpO2zaHKEvH9THbaRajBggDhJ9bcxikajuOy8rNwfjps1kZK7UZlKoY+wVoX2Jw+7EJ9AAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,s.mdx)("img",{parentName:"a",className:"gatsby-resp-image-image",alt:"List of all containers with their status",title:"List of all containers with their status",src:"/static/2ba7526a63599cfdb98dfee311acb055/a6d36/docker-created-containers.png",srcSet:["/static/2ba7526a63599cfdb98dfee311acb055/222b7/docker-created-containers.png 163w","/static/2ba7526a63599cfdb98dfee311acb055/ff46a/docker-created-containers.png 325w","/static/2ba7526a63599cfdb98dfee311acb055/a6d36/docker-created-containers.png 650w","/static/2ba7526a63599cfdb98dfee311acb055/e548f/docker-created-containers.png 975w","/static/2ba7526a63599cfdb98dfee311acb055/d69c4/docker-created-containers.png 1002w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n  "),"\n    "),"\n    ",(0,s.mdx)("figcaption",{parentName:"figure",className:"gatsby-resp-image-figcaption"},"List of all containers with their status"),"\n  ")),(0,s.mdx)("p",null,"If you feel they are too many stopped and unused containers and needs cleanup, run the below commands to clean them up."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Prune unused docker networks"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," network prune"))),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Remove all stopped containers"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"docker")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"rm")," ",(0,s.mdx)("span",{parentName:"code",className:"token variable"},(0,s.mdx)("span",{parentName:"span",className:"token variable"},"$("),(0,s.mdx)("span",{parentName:"span",className:"token function"},"docker")," ",(0,s.mdx)("span",{parentName:"span",className:"token function"},"ps")," -a -q",(0,s.mdx)("span",{parentName:"span",className:"token variable"},")"))))),(0,s.mdx)("h2",{id:"minio-quarkus-extension"},"MinIO Quarkus Extension"),(0,s.mdx)("p",null,"To get Native build running with MinIO integration, we had to configure lot many classes in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"reflection-config.json"),". It will be real hard to configure all of these in every application we plan to use MinIO. This can be eliminated with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Quarkus Extension"),"."),(0,s.mdx)("p",null,(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Quarkus Extension")," is a module that can run on top of a Quarkus application. It is a Maven multi-module project composed of two modules. The first is a runtime module where we implement requirements. The second is a deployment module for processing configuration and generating the runtime code."),(0,s.mdx)("p",null,"Below is the maven command to create a new quarkus extension."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Maven command to bootstrap extension"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},(0,s.mdx)("pre",{parentName:"div",className:"language-bash"},(0,s.mdx)("code",{parentName:"pre",className:"language-bash"},"$ mvn io.quarkus:quarkus-maven-plugin:1.4.2.Final:create-extension -N ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"\\"),"\n    -DgroupId",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),"org.toomuch2learn ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"\\"),"\n    -DartifactId",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),"quarkus-minio ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"\\"),"\n    -Dversion",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,s.mdx)("span",{parentName:"code",className:"token number"},"1.0"),"-SNAPSHOT ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"\\"),"\n    -Dquarkus.nameBase",(0,s.mdx)("span",{parentName:"code",className:"token operator"},"="),(0,s.mdx)("span",{parentName:"code",className:"token string"},'"Quarkus MinIO Extension"')))),(0,s.mdx)("p",null,"This should bootstrap the Quarkus extension, we would see tww modules created ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"deployment")," and ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"runtime")," with each holding their individual ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"pom.xml")," and also one at the root level referring to both of these as below:"),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"pom.xml"),(0,s.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"xml"},(0,s.mdx)("pre",{parentName:"div",className:"language-xml"},(0,s.mdx)("code",{parentName:"pre",className:"language-xml"},(0,s.mdx)("span",{parentName:"code",className:"token prolog"},'<?xml version="1.0" encoding="UTF-8"?>'),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"project")," ",(0,s.mdx)("span",{parentName:"span",className:"token attr-name"},"xmlns"),(0,s.mdx)("span",{parentName:"span",className:"token attr-value"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},'"'),"http://maven.apache.org/POM/4.0.0",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},'"')),"\n         ",(0,s.mdx)("span",{parentName:"span",className:"token attr-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"xmlns:"),"xsi"),(0,s.mdx)("span",{parentName:"span",className:"token attr-value"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},'"'),"http://www.w3.org/2001/XMLSchema-instance",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},'"')),"\n         ",(0,s.mdx)("span",{parentName:"span",className:"token attr-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"xsi:"),"schemaLocation"),(0,s.mdx)("span",{parentName:"span",className:"token attr-value"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},'"'),"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},'"')),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"modelVersion"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"4.0.0",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"modelVersion"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"org.toomuch2learn",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"quarkus-minio-parent",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"1.0-SNAPSHOT",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"name"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"Quarkus MinIO Extension - Parent",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"name"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"packaging"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"pom",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"packaging"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"properties"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ...\n      ...\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"properties"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n\n",(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"modules"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      ",(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"module"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"deployment",(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"module"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"      ",(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"module"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"runtime",(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"module"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))),(0,s.mdx)("span",{parentName:"code",className:"gatsby-highlight-code-line"},"  ",(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"modules"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependencyManagement"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ...\n      ...\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependencyManagement"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"build"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n      ...\n      ...\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"build"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"project"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))))),(0,s.mdx)("p",null,"Lot of reading is required to understand what and how to implement Quarkus Extension which will support for successful execution of native build. Please go through the references section listed below."),(0,s.mdx)("p",null,"Quarkus Extension for ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO")," is implemented based on the principals defined for building an extension. We just register the classes in this extension as what is registered in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"reflection-config.json"),". Clone the project and refer to the code on understanding how this is done."),(0,s.mdx)(c,{href:"https://github.com/2much2learn/minio-quarkus-extension",mdxType:"GithubRepo"},"minio-quarkus-extension"),(0,s.mdx)("p",null,"Classes registered in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"reflection-config.json")," are registered in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"QuarkusMinioProcessor.java")," in ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"deployment")," module. Below is reference for the same."),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"QuarkusMinioProcessor.java"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"java"},(0,s.mdx)("pre",{parentName:"div",className:"language-java"},(0,s.mdx)("code",{parentName:"pre",className:"language-java"},(0,s.mdx)("span",{parentName:"code",className:"token annotation punctuation"},"@BuildStep"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ReflectiveClassBuildItem")," ",(0,s.mdx)("span",{parentName:"code",className:"token function"},"reflective"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")")," ",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"return")," ",(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"new")," ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},"ReflectiveClassBuildItem"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},",")," ",(0,s.mdx)("span",{parentName:"code",className:"token boolean"},"true"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"io",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"minio",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"messages",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),"LocationConstraint"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCanonicalName"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"io",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"minio",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"messages",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),"InitiateMultipartUploadResult"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCanonicalName"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"io",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"minio",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"messages",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),"ErrorResponse"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCanonicalName"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// getting Canonical name does not include $ rather includes . which is failing in native build run"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"io.minio.ErrorCode$ErrorCodeConverter"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"io",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"minio",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"messages",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),"CompleteMultipartUpload"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCanonicalName"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token class-name"},(0,s.mdx)("span",{parentName:"span",className:"token namespace"},"io",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"minio",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"."),"messages",(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},".")),"Part"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token keyword"},"class"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"."),(0,s.mdx)("span",{parentName:"code",className:"token function"},"getCanonicalName"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"("),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n\n    ",(0,s.mdx)("span",{parentName:"code",className:"token comment"},"// XML Parser configurations"),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"org.simpleframework.xml.core.TextLabel"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"org.simpleframework.xml.core.ElementLabel"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",(0,s.mdx)("span",{parentName:"code",className:"token string"},'"org.simpleframework.xml.core.ElementListLabel"'),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},")"),(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},";"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token punctuation"},"}")))),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Upon cloning the project, run ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"mvn clean install")," to build and install the package to local maven repo. "),(0,s.mdx)("li",{parentName:"ul"},"Add ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"org.toomuch2learn")," MinIO Quarkus Extension dependency to the API project next to ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"io.minio")," dependency.")),(0,s.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"pom.xml"),(0,s.mdx)("div",{className:"gatsby-highlight","data-language":"xml"},(0,s.mdx)("pre",{parentName:"div",className:"language-xml"},(0,s.mdx)("code",{parentName:"pre",className:"language-xml"},(0,s.mdx)("span",{parentName:"code",className:"token comment"},"\x3c!-- MinIO Client SK --\x3e"),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"io.minio",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"minio",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"7.0.2",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"org.toomuch2learn",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"groupId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"quarkus-minio",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"artifactId"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n  ",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"<"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"1.0-SNAPSHOT",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"version"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">")),"\n",(0,s.mdx)("span",{parentName:"code",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token tag"},(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},"</"),"dependency"),(0,s.mdx)("span",{parentName:"span",className:"token punctuation"},">"))))),(0,s.mdx)("ul",null,(0,s.mdx)("li",{parentName:"ul"},"Remove all ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"io.minio")," and ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"org.simpleframework")," classes registered in ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"reflection-config.json"),"."),(0,s.mdx)("li",{parentName:"ul"},"Build the native build using ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"mvn clean package -Pnative"),"."),(0,s.mdx)("li",{parentName:"ul"},"Run the native build using ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"./target/catalogue-crud-1.0.0-SNAPSHOT-runner")," and test the endpoints with postman. You will observe no more issues related to ",(0,s.mdx)("code",{parentName:"li",className:"language-text"},"Constructor not matched for class io.minio.messages.LocationConstraint")," exceptions.")),(0,s.mdx)(r,{title:"Quarkus Extension References:",links:[{name:"WRITING YOUR OWN EXTENSION",url:"https://quarkus.io/guides/writing-extensions"},{name:"TIPS FOR WRITING NATIVE APPLICATIONS",url:"https://quarkus.io/guides/writing-native-applications-tips"},{name:"Dynamic proxies on Substrate VM",url:"https://github.com/oracle/graal/blob/master/substratevm/DYNAMIC_PROXY.md"},{name:"Class Initialization in Native Image",url:"https://github.com/oracle/graal/blob/master/substratevm/CLASS-INITIALIZATION.md"},{name:"Understanding Class Initialization in GraalVM Native Image Generation",url:"https://medium.com/graalvm/understanding-class-initialization-in-graalvm-native-image-generation-d765b7e4d6ed"},{name:"Updates on Class Initialization in GraalVM Native Image Generation",url:"https://medium.com/graalvm/updates-on-class-initialization-in-graalvm-native-image-generation-c61faca461f7"}],mdxType:"ExternalLinksListContainer"}),(0,s.mdx)("h2",{id:"conclusion"},"Conclusion"),(0,s.mdx)("p",null,"This article is more on exploring options for implementing File upload to Object Storage Service with Native builds. "),(0,s.mdx)("p",null,"With microservice application that we build to handle ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"CRUD")," operations from ",(0,s.mdx)(d,{href:"https://github.com/2much2learn/article-apr23-restful-event-driven-microservice-using-quarkus-jpa-kafka",mdxType:"ExternalLink"},"other article"),", this is more of an extension on top of it to introduce additional endpoint to upload image and finally push it to Object Storage Service."),(0,s.mdx)("p",null,"With lot of ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"glitches")," & ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"challenges"),", I could finally finish up this example to run successfully with native build. Following step by step provided details from this article, it will be an ease to implement, build and test file upload with ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"Qurakus")," + ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"RESTeasy")," and push it to ",(0,s.mdx)("code",{parentName:"p",className:"language-text"},"MinIO"),"."),(0,s.mdx)(c,{href:"https://github.com/2much2learn/article-may10-uploading-files-to-cloud-native-object-store-from-quarkus-restful-api",mdxType:"GithubRepo"},"uploading-files-to-cloud-native-object-store-from-quarkus-restful-api"))}i.isMDXComponent=!0}}]);
//# sourceMappingURL=37763b36-45e7523498e324167fc8.js.map