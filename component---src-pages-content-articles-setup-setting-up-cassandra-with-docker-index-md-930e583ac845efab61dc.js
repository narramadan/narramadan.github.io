(window.webpackJsonp=window.webpackJsonp||[]).push([[60,43,44,45,46,48,49,51,52,53,54,57,62],{"8vkt":function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return c})),t.d(a,"default",(function(){return i}));var s=t("zLVn"),n=(t("q1tI"),t("7ljp")),c={templateKey:"article",published:!0,displayComments:!0,showAuthorInfo:!0,showSideBar:!1,author:"narramadan",title:"Setting up Cassandra with Docker",description:"A detailed step by step guide on Setting up Cassandra with Docker.",date:"2021-10-19T15:46:37.121+10:00",updated:"2021-10-19T15:46:37.121+10:00",cover:"../../../images/blog-banners/setup-banner-1200x690.png",category:"setup",tags:["Cassandra","Docker","Containerization","featured"],keywords:["Setting up Cassandra with Docker","Cassandra with Docker","Database with Docker","Create Cassandra database with Docker","Migrate Cassandra from Docker","Provision Cassandra database with Docker","Cassandra on Windows 10","Cassandra","Windows 10","Docker","narra.madan","narramadan","narra.madan@outlook.com","Madan Narra","Narra Madan"]},m=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(n.mdx)("div",a)}},o=m("GithubRepo"),r=m("ExternalLink"),d={_frontmatter:c};function i(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(n.mdx)("wrapper",Object.assign({},d,t,{components:a,mdxType:"MDXLayout"}),Object(n.mdx)(o,{href:"https://github.com/2much2learn/article-oct192021-cassandra-with-docker",mdxType:"GithubRepo"},"setting-up-cassandra-with-docker-on-windows"),Object(n.mdx)("h2",{id:"introduction"},"Introduction"),Object(n.mdx)("p",null,"As part of any application development, we definitely need a database. There might be different use cases which need different databases. Having them all installed on our machine might not be an ideal scenario. In the world of containers, this would ease us to provision the choice of database easily for testing purpose without actually installing them. "),Object(n.mdx)("p",null,"In this article we shall provision Apache Cassandra docker container and go through steps on using it."),Object(n.mdx)("h2",{id:"why-use-apache-cassandra"},"Why use Apache Cassandra?"),Object(n.mdx)("p",null,Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Apache Cassandra")," is an open source, ",Object(n.mdx)(r,{href:"https://en.wikipedia.org/wiki/Distributed_database",mdxType:"ExternalLink"},"distributed"),", ",Object(n.mdx)(r,{href:"https://en.wikipedia.org/wiki/Wide-column_store",mdxType:"ExternalLink"},"wide-column store"),", ",Object(n.mdx)(r,{href:"https://en.wikipedia.org/wiki/NoSQL",mdxType:"ExternalLink"},"NoSQL")," database which delivers always-on availability (",Object(n.mdx)(r,{href:"https://en.wikipedia.org/wiki/Single_point_of_failure",mdxType:"ExternalLink"},"No SPOF"),")."),Object(n.mdx)("p",null,Object(n.mdx)("figure",Object.assign({parentName:"p"},{className:"gatsby-resp-image-figure",style:{}}),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"figure"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"650px"}}),"\n      ",Object(n.mdx)("a",Object.assign({parentName:"span"},{className:"gatsby-resp-image-link",href:"/static/2c8e669729468a3aa97b92bd9cdae6ef/eda13/apache-cassandra-diagrams-01.jpg",style:{display:"block"},target:"_blank",rel:"noopener"}),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"a"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"49.079754601226995%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHt4rNNgr//xAAbEAACAQUAAAAAAAAAAAAAAAAAAgEDECExMv/aAAgBAQABBQJsEbG5p2//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEBAAY/AjIxz//EAB0QAAICAQUAAAAAAAAAAAAAAAERADEhEEFxobH/2gAIAQEAAT8hwBIElVN40XYzBOtLcB5p/9oADAMBAAIAAwAAABDkz//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAwEBPxA1f//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQADAAIDAAAAAAAAAAAAAAEAESEQUTFhsf/aAAgBAQABPxClSBCpIkC6B7HZlVPDG4Lt7/IQz4X/2Q==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.mdx)("img",Object.assign({parentName:"a"},{className:"gatsby-resp-image-image",alt:"Apache Cassandra",title:"Apache Cassandra",src:"/static/2c8e669729468a3aa97b92bd9cdae6ef/6aca1/apache-cassandra-diagrams-01.jpg",srcSet:["/static/2c8e669729468a3aa97b92bd9cdae6ef/d2f63/apache-cassandra-diagrams-01.jpg 163w","/static/2c8e669729468a3aa97b92bd9cdae6ef/c989d/apache-cassandra-diagrams-01.jpg 325w","/static/2c8e669729468a3aa97b92bd9cdae6ef/6aca1/apache-cassandra-diagrams-01.jpg 650w","/static/2c8e669729468a3aa97b92bd9cdae6ef/7c09c/apache-cassandra-diagrams-01.jpg 975w","/static/2c8e669729468a3aa97b92bd9cdae6ef/01ab0/apache-cassandra-diagrams-01.jpg 1300w","/static/2c8e669729468a3aa97b92bd9cdae6ef/eda13/apache-cassandra-diagrams-01.jpg 3825w"],sizes:"(max-width: 650px) 100vw, 650px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n  "),"\n    "),"\n    ",Object(n.mdx)("figcaption",Object.assign({parentName:"figure"},{className:"gatsby-resp-image-figcaption"}),"Apache Cassandra"),"\n  ")),Object(n.mdx)("p",null,"Below are some key features of Cassandra. Refer to the ",Object(n.mdx)(r,{href:"https://www.tutorialspoint.com/cassandra/cassandra_introduction.htm",mdxType:"ExternalLink"},"tutorial")," for more detail insights on ",Object(n.mdx)(r,{href:"https://www.tutorialspoint.com/cassandra/cassandra_architecture.htm",mdxType:"ExternalLink"},"Architecture"),", ",Object(n.mdx)(r,{href:"https://www.tutorialspoint.com/cassandra/cassandra_data_model.htm",mdxType:"ExternalLink"},"Data Model")," & ",Object(n.mdx)(r,{href:"https://www.tutorialspoint.com/cassandra/cassandra_cqlsh.htm",mdxType:"ExternalLink"},"Cqlsh"),"."),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Elastic scalability")," − Cassandra is highly scalable; it allows to add more hardware to accommodate more customers and more data as per requirement.")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Always on architecture")," − Cassandra has no single point of failure and it is continuously available for business-critical applications that cannot afford a failure.")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Fast linear-scale performance")," − Cassandra is linearly scalable, i.e., it increases your throughput as you increase the number of nodes in the cluster. Therefore it maintains a quick response time.")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Flexible data storage")," − Cassandra accommodates all possible data formats including: structured, semi-structured, and unstructured. It can dynamically accommodate changes to your data structures according to your need.")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Easy data distribution")," − Cassandra provides the flexibility to distribute data where you need by replicating data across multiple data centers.")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Transaction support")," − Cassandra supports properties like Atomicity, Consistency, Isolation, and Durability (ACID).")),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("p",{parentName:"li"},Object(n.mdx)("strong",{parentName:"p"},"Fast writes")," − Cassandra was designed to run on cheap commodity hardware. It performs blazingly fast writes and can store hundreds of terabytes of data, without sacrificing the read efficiency."))),Object(n.mdx)("h2",{id:"what-are-we-going-to-do"},"What are we going to do?"),Object(n.mdx)("p",null,"In this article, we shall go through on using ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Docker")," to explore ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Cassandra"),". Below are series of things we will be doing in this article:"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},"Provision Cassandra container"),Object(n.mdx)("li",{parentName:"ul"},"Connecting to Cassandra from container shell"),Object(n.mdx)("li",{parentName:"ul"},"Create keyspace and perform some table operations"),Object(n.mdx)("li",{parentName:"ul"},"Connecting to the database from Cassandra GUI Client"),Object(n.mdx)("li",{parentName:"ul"},"Initialize Cassandra docker container with keyspace and data")),Object(n.mdx)("h2",{id:"prerequisites"},"Prerequisites"),Object(n.mdx)("p",null,"Having Docker installed on your machine is necessary to try out provisioning Cassandra container."),Object(n.mdx)("p",null,"Install ",Object(n.mdx)(r,{href:"https://hub.docker.com/editions/community/docker-ce-desktop-windows",mdxType:"ExternalLink"},"Docker Desktop")," to get started with Docker on Windows."),Object(n.mdx)("p",null,"Post installation, run the below command in command prompt to verify if docker & docker-compose is installed successfully or validate if they are working as expected if docker is installed prior."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Docker Version"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker -v\n\nDocker version ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20.10"),".8, build 3967b7d"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Docker Compose Version"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose -v\n\nDocker Compose version v2.0.0"))),Object(n.mdx)("h2",{id:"cassandra-docker-image"},"Cassandra Docker Image"),Object(n.mdx)("p",null,"In this article, we shall use ",Object(n.mdx)(r,{href:"https://hub.docker.com/r/bitnami/cassandra/",mdxType:"ExternalLink"},"bitname/cassandra")," docker image opposed to official ",Object(n.mdx)(r,{href:"https://hub.docker.com/_/cassandra",mdxType:"ExternalLink"},"cassandra")," image."),Object(n.mdx)("p",null,"Below are few salient reasons for opting ",Object(n.mdx)("strong",{parentName:"p"},"Bitnami Images"),":"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},"Bitnami closely tracks upstream source changes and promptly publishes new versions of this image using our automated systems."),Object(n.mdx)("li",{parentName:"ul"},"With Bitnami images the latest bug fixes and features are available as soon as possible."),Object(n.mdx)("li",{parentName:"ul"},"Bitnami containers, virtual machines and cloud images use the same components and configuration approach - making it easy to switch between formats based on your project needs."),Object(n.mdx)("li",{parentName:"ul"},"Bitnami container images are released daily with the latest distribution packages available.")),Object(n.mdx)("h2",{id:"provision-cassandra-container"},"Provision Cassandra Container"),Object(n.mdx)("p",null,"It’s ideal option to orchestrate cassandra provisioning using ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose")," compared to running ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker run"),". Both options are provided below for reference."),Object(n.mdx)("h3",{id:"using-docker"},"Using docker"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker run ^\n    --name cassandra ^\n    -p ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7000"),":7000 ^\n    -p ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"9042"),":9042 ^\n    -v %cd%:/bitnami ^\n    -d bitnami/cassandra:latest\n\nUnable to ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"find")," image ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'bitnami/cassandra:latest'")," locally\nlatest: Pulling from bitnami/cassandra\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\nDigest: sha256:30f76ea2e81f5379e1ba4c31c0f8b0c5481cd379b01113e3375ecfd6d5961862\nStatus: Downloaded newer image ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," bitnami/cassandra:latest\nd67aca9ca1a79109b1ccf3010b3b549c9f80c876c981406c8a169ab23ddb74a8"))),Object(n.mdx)("p",null,"Options passed:"),Object(n.mdx)("ul",null,Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"--detach, -d")," - Run container in background and print container ID"),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"--publish, -p")," - Publish a container’s port(s) to the host"),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"--name")," - Assign a name to the container"),Object(n.mdx)("li",{parentName:"ul"},Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"-v")," - Mount current directory path as volume. This should create ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"cassandra")," folder in the location where the ",Object(n.mdx)("code",Object.assign({parentName:"li"},{className:"language-text"}),"docker run")," is executed")),Object(n.mdx)("p",null,"Verify if the container is provisioned by list containers command. Check logs to follow the traces on whats happening within the container."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"List containers"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ps"),"\nCONTAINER ID   IMAGE                      COMMAND                  CREATED         STATUS         PORTS                                            NAMES\n1d897306c76c   bitnami/cassandra:latest   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"/opt/bitnami/script…"'),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"8")," seconds ago   Up ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"5")," seconds   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0.0"),".0.0:7000-",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7000"),"/tcp, ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0.0"),".0.0:9042-",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"9042"),"/tcp   cassandra"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"View logs"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker logs -f cassandra\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.21\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.21 Welcome to the Bitnami cassandra container\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.21 Subscribe to project updates by watching https://github.com/bitnami/bitnami-docker-cassandra\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.21 Submit issues and feature requests at https://github.com/bitnami/bitnami-docker-cassandra/issues\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.21\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.22 INFO  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=="),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ** Starting Cassandra setup **\ncassandra ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":23:34.24 INFO  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=="),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," Validating settings ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"in")," CASSANDRA_* ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"env")," vars",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..")))),Object(n.mdx)("p",null,"Cleanup by stopping and removing the container before trying out provisioning with ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose")),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Cleanup"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker stop cassandra\n\nλ docker ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"rm")," cassandra"))),Object(n.mdx)("h3",{id:"using-docker-compose"},"Using docker-compose"),Object(n.mdx)("p",null,Object(n.mdx)("strong",{parentName:"p"},"Docker Compose")," is a tool for defining and running multi-container Docker applications. With Compose, we use a YAML file to configure your application’s services. Then, with a single command, we create and start all the services from our configuration."),Object(n.mdx)("p",null,"To start with, let’s create ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose.yml")," with the below configuration."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"docker-compose.yml"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"yml"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-yml"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-yml"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"version"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'3'"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"services"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"cassandra"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"image"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," docker.io/bitnami/cassandra",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"latest\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"ports"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'7000:7000'"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'9042:9042'"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"volumes"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'cassandra_data:/bitnami'"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"healthcheck"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"test"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"[")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"CMD"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"/opt/bitnami/cassandra/bin/cqlsh"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"-u cassandra"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"-p cassandra"')," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"-e \\"describe keyspaces\\""')," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"interval"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," 15s\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"timeout"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," 10s\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"retries"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"10"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"environment"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," CASSANDRA_SEEDS=cassandra\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," CASSANDRA_PASSWORD_SEEDER=yes\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," CASSANDRA_PASSWORD=cassandra\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"volumes"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"cassandra_data"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"driver"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," local"))),Object(n.mdx)("p",null,"If observed, ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cassandra")," service is defined with different configurations which can be helpful to orchestrate, configure and perform healthcheck if instance is provisioned and running successfully by listing ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"keyspaces"),"."),Object(n.mdx)("p",null,"Run the below series of commands from the path where docker-compose.yml resides."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Validate yaml file and list services"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose config --services"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Build and start services"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose up -d\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"+",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," Running ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"2"),"/2\n - Network cassandratest_default        Created                                                                      \n - Container cassandratest-cassandra-1  Started"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"List containers"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ps"),"\nNAME                                  COMMAND                  SERVICE             STATUS               PORTS\ncassandratest-cassandra-1   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"/opt/bitnami/script…"'),"   cassandra           running ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"starting",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0.0"),".0.0:7000-",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7000"),"/tcp, ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0.0"),".0.0:9042-",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"9042"),"/tcp"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Display the running processes"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"top"),"\ncassandratest-cassandra-1\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token environment constant"}),"UID"),"    PID     ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token environment constant"}),"PPID"),"    C    STIME   TTY   TIME       CMD\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1001"),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"25498"),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"25477"),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"21"),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"20"),":48   ?     00:00:22   /opt/bitnami/java/bin/java -ea -da:net.openhft"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Stop and start services"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose stop\n\nλ docker-compose start"))),Object(n.mdx)("p",null,"Run the below command to perform cleanup activities - Stops containers and removes containers, networks, volumes, and images created by ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"up")),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Cleanup"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose down -v\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),"+",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," Running ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"3"),"/3\n - Container cassandratest-cassandra-1  Removed  \n - Volume cassandratest_cassandra_data  Removed  \n - Network cassandratest_default        Removed"))),Object(n.mdx)("p",null,Object(n.mdx)("strong",{parentName:"p"},"Note"),": If the file name is other than ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose.yml"),", then run the commands by providing the file as below"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"provide file"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose -f service-compose",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\"),"services.yml up -d\n\nλ docker-compose -f service-compose",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\"),"services.yml ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ps"),"\n\nλ docker-compose -f service-compose",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"\\"),"services.yml down -v"))),Object(n.mdx)("h2",{id:"connecting-to-the-database-from-container-shell"},"Connecting to the database from container shell"),Object(n.mdx)("p",null,"In order to interact and execute statements, we need to connect to container shell and login to ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cqlsh")," service."),Object(n.mdx)("p",null,"Run the below commands post provisioning the container instance either through ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker")," or ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose")," as briefed above."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Provision container"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker-compose up -d\n\nλ docker-compose ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ps"),"\nNAME                                  COMMAND                  SERVICE             STATUS               PORTS\ncassandratest-cassandra-1   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"/opt/bitnami/script…"'),"   cassandra           running ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"starting",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),"   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0.0"),".0.0:7000-",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7000"),"/tcp, ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0.0"),".0.0:9042-",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"9042"),"/tcp"))),Object(n.mdx)("p",null,"Connect to container shell using ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker exec")," by passing the name as listed in ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose ps")," output. Running ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"ls -ltrs")," should list something as below post connecting to the shell."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Connect to container shell"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"exec")," -it cassandratest-cassandra-1 ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"bash"),"\n\nI have no name",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"!"),"@12102dc0991f:/$ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"ls")," -ltrs\ntotal ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"76"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxr-xr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Sep ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"25"),"  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"2017")," lib\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxr-xr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Sep ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"27")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"16"),":53 var\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxr-xr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," 09:48 sbin\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxr-xr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," 09:48 bin\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0")," lrwxrwxrwx   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"44")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," 09:49 entrypoint.sh -",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," /opt/bitnami/scripts/cassandra/entrypoint.sh\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"0")," lrwxrwxrwx   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"37")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," 09:49 run.sh -",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," /opt/bitnami/scripts/cassandra/run.sh\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxrwxr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"2")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," 09:49 docker-entrypoint-initdb.d\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxr-xr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"23"),":27 etc\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," drwxr-xr-x   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"3")," root root ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4096")," Oct ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"18")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"23"),":27 bitnami\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..")))),Object(n.mdx)("h2",{id:"perform-database-operations"},"Perform database operations"),Object(n.mdx)("p",null,Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Cassandra Query Language (CQL)")," is the primary language for communicating with the cassandra database. Syntax is slightly to SQL."),Object(n.mdx)("p",null,"To start with, we need to create ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Keyspace")," in Cassandra which is similar to a database in SQL."),Object(n.mdx)("p",null,"For the purpose of this article, we shall create sample database to manage ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Cycling Races")," documented in ",Object(n.mdx)(r,{href:"https://docs.datastax.com/en/dse/5.1/cql/examples/cycling/doc/cyclingks.html",mdxType:"ExternalLink"},"DataStax CQL Documentation"),"."),Object(n.mdx)("p",null,"Though Cassandra is NoSQL Database, We can model the domain by creating normalized tables and create foreign reference keys. "),Object(n.mdx)("p",null,"Below is the high level entity diagram on the database structure that we shall create under ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cycling")," keyspace."),Object(n.mdx)("div",{className:"mermaid","data-processed":"true"},Object(n.mdx)("svg",Object.assign({parentName:"div"},{id:"mermaid-1635309154115",width:"100%",xmlns:"http://www.w3.org/2000/svg",height:"465",style:{maxWidth:"404.171875px"},viewBox:"0 0 404.171875 465"}),Object(n.mdx)("style",{parentName:"svg"},'#mermaid-1635309154115{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1635309154115 .error-icon{fill:#552222;}#mermaid-1635309154115 .error-text{fill:#552222;stroke:#552222;}#mermaid-1635309154115 .edge-thickness-normal{stroke-width:2px;}#mermaid-1635309154115 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1635309154115 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1635309154115 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1635309154115 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1635309154115 .marker{fill:#333333;}#mermaid-1635309154115 .marker.cross{stroke:#333333;}#mermaid-1635309154115 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1635309154115 .entityBox{fill:#ECECFF;stroke:#9370DB;}#mermaid-1635309154115 .attributeBoxOdd{fill:#ffffff;stroke:#9370DB;}#mermaid-1635309154115 .attributeBoxEven{fill:#f2f2f2;stroke:#9370DB;}#mermaid-1635309154115 .relationshipLabelBox{fill:hsl(80,100%,96.2745098039%);opacity:0.7;background-color:hsl(80,100%,96.2745098039%);}#mermaid-1635309154115 .relationshipLabelBox rect{opacity:0.5;}#mermaid-1635309154115 .relationshipLine{stroke:#333333;}#mermaid-1635309154115 .node rect{fill:cornflowerblue;}#mermaid-1635309154115:root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#mermaid-1635309154115 er{fill:apa;}'),Object(n.mdx)("g",{parentName:"svg"}),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ONLY_ONE_START",refX:"0",refY:"9",markerWidth:"18",markerHeight:"18",orient:"auto"}),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M9,0 L9,18 M15,0 L15,18"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ONLY_ONE_END",refX:"18",refY:"9",markerWidth:"18",markerHeight:"18",orient:"auto"}),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M3,0 L3,18 M9,0 L9,18"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ZERO_OR_ONE_START",refX:"0",refY:"9",markerWidth:"30",markerHeight:"18",orient:"auto"}),Object(n.mdx)("circle",Object.assign({parentName:"marker"},{stroke:"gray",fill:"white",cx:"21",cy:"9",r:"6"})),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M9,0 L9,18"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ZERO_OR_ONE_END",refX:"30",refY:"9",markerWidth:"30",markerHeight:"18",orient:"auto"}),Object(n.mdx)("circle",Object.assign({parentName:"marker"},{stroke:"gray",fill:"white",cx:"9",cy:"9",r:"6"})),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M21,0 L21,18"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ONE_OR_MORE_START",refX:"18",refY:"18",markerWidth:"45",markerHeight:"36",orient:"auto"}),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ONE_OR_MORE_END",refX:"27",refY:"18",markerWidth:"45",markerHeight:"36",orient:"auto"}),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ZERO_OR_MORE_START",refX:"18",refY:"18",markerWidth:"57",markerHeight:"36",orient:"auto"}),Object(n.mdx)("circle",Object.assign({parentName:"marker"},{stroke:"gray",fill:"white",cx:"48",cy:"18",r:"6"})),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M0,18 Q18,0 36,18 Q18,36 0,18"})))),Object(n.mdx)("defs",{parentName:"svg"},Object(n.mdx)("marker",Object.assign({parentName:"defs"},{id:"ZERO_OR_MORE_END",refX:"39",refY:"18",markerWidth:"57",markerHeight:"36",orient:"auto"}),Object(n.mdx)("circle",Object.assign({parentName:"marker"},{stroke:"gray",fill:"white",cx:"9",cy:"18",r:"6"})),Object(n.mdx)("path",Object.assign({parentName:"marker"},{stroke:"gray",fill:"none",d:"M21,18 Q39,0 57,18 Q39,36 21,18"})))),Object(n.mdx)("path",Object.assign({parentName:"svg"},{className:"er relationshipLine",d:"M186.04296875,95L186.04296875,103.33333333333333C186.04296875,111.66666666666667,186.04296875,128.33333333333334,186.04296875,145C186.04296875,161.66666666666666,186.04296875,178.33333333333334,186.04296875,186.66666666666666L186.04296875,195",stroke:"gray",fill:"none",markerEnd:"url(#ZERO_OR_MORE_END)",markerStart:"url(#ONE_OR_MORE_START)"})),Object(n.mdx)("path",Object.assign({parentName:"svg"},{className:"er relationshipLine",d:"M136.31026785714286,270L125.25855654761905,278.3333333333333C114.20684523809524,286.6666666666667,92.10342261904763,303.3333333333333,81.05171130952381,320C70,336.6666666666667,70,353.3333333333333,70,361.6666666666667L70,370",stroke:"gray",fill:"none",strokeDashArray:["8","8"],markerEnd:"url(#ONE_OR_MORE_END)",markerStart:"url(#ONE_OR_MORE_START)"})),Object(n.mdx)("path",Object.assign({parentName:"svg"},{className:"er relationshipLine",d:"M235.77566964285714,270L246.82738095238096,278.3333333333333C257.87909226190476,286.6666666666667,279.98251488095235,303.3333333333333,291.0342261904762,320C302.0859375,336.6666666666667,302.0859375,353.3333333333333,302.0859375,361.6666666666667L302.0859375,370",stroke:"gray",fill:"none",strokeDashArray:["8","8"],markerEnd:"url(#ONE_OR_MORE_END)",markerStart:"url(#ONE_OR_MORE_START)"})),Object(n.mdx)("g",Object.assign({parentName:"svg"},{id:"cyclist_name",transform:"translate(135.78515625,20 )"}),Object(n.mdx)("rect",Object.assign({parentName:"g"},{className:"er entityBox",fill:"honeydew",fillOpacity:"100%",stroke:"gray",x:"0",y:"0",width:"100.515625",height:"75"})),Object(n.mdx)("text",Object.assign({parentName:"g"},{className:"er entityLabel",id:"entity-cyclist_name",x:"0",y:"0",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"},transform:"translate(50.2578125,37.5)"}),"cyclist_name")),Object(n.mdx)("g",Object.assign({parentName:"svg"},{id:"cyclist_races",transform:"translate(136.04296875,195 )"}),Object(n.mdx)("rect",Object.assign({parentName:"g"},{className:"er entityBox",fill:"honeydew",fillOpacity:"100%",stroke:"gray",x:"0",y:"0",width:"100",height:"75"})),Object(n.mdx)("text",Object.assign({parentName:"g"},{className:"er entityLabel",id:"entity-cyclist_races",x:"0",y:"0",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"},transform:"translate(50,37.5)"}),"cyclist_races")),Object(n.mdx)("g",Object.assign({parentName:"svg"},{id:"race_times",transform:"translate(20,370 )"}),Object(n.mdx)("rect",Object.assign({parentName:"g"},{className:"er entityBox",fill:"honeydew",fillOpacity:"100%",stroke:"gray",x:"0",y:"0",width:"100",height:"75"})),Object(n.mdx)("text",Object.assign({parentName:"g"},{className:"er entityLabel",id:"entity-race_times",x:"0",y:"0",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"},transform:"translate(50,37.5)"}),"race_times")),Object(n.mdx)("g",Object.assign({parentName:"svg"},{id:"rank_by_year_and_name",transform:"translate(220,370 )"}),Object(n.mdx)("rect",Object.assign({parentName:"g"},{className:"er entityBox",fill:"honeydew",fillOpacity:"100%",stroke:"gray",x:"0",y:"0",width:"164.171875",height:"75"})),Object(n.mdx)("text",Object.assign({parentName:"g"},{className:"er entityLabel",id:"entity-rank_by_year_and_name",x:"0",y:"0",dominantBaseline:"middle",textAnchor:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"},transform:"translate(82.0859375,37.5)"}),"rank_by_year_and_name")),Object(n.mdx)("rect",Object.assign({parentName:"svg"},{className:"er relationshipLabelBox",x:"171.80859375",y:"137.9921875",width:"28.46875",height:"14.015625",fill:"white",fillOpacity:"85%"})),Object(n.mdx)("text",Object.assign({parentName:"svg"},{className:"er relationshipLabel",id:"rel1",x:"186.04296875",y:"145",textAnchor:"middle",dominantBaseline:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"}}),"races"),Object(n.mdx)("rect",Object.assign({parentName:"svg"},{className:"er relationshipLabelBox",x:"54.47752380371094",y:"304.0086975097656",width:"67.03125",height:"14.015625",fill:"white",fillOpacity:"85%"})),Object(n.mdx)("text",Object.assign({parentName:"svg"},{className:"er relationshipLabel",id:"rel2",x:"87.99314880371094",y:"311.0165100097656",textAnchor:"middle",dominantBaseline:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"}}),"race-timings"),Object(n.mdx)("rect",Object.assign({parentName:"svg"},{className:"er relationshipLabelBox",x:"264.2958984375",y:"304.0086975097656",width:"39.59375",height:"14.015625",fill:"white",fillOpacity:"85%"})),Object(n.mdx)("text",Object.assign({parentName:"svg"},{className:"er relationshipLabel",id:"rel3",x:"284.0927734375",y:"311.0165100097656",textAnchor:"middle",dominantBaseline:"middle",style:{fontFamily:'"trebuchet ms", verdana, arial, sans-serif',fontSize:"12px"}}),"ranking"))),Object(n.mdx)("p",null,"As observed, the database is to track cyclist’s ranking in one or more race’s that is conducted as part of an event."),Object(n.mdx)("p",null,"The model design includes couple of ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"joins")," to mimic relationships, but Cassandra doesn’t enforce this as there are ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"No Join")," queries. We need to create the data model in demoralized way ensuring there is no referential integrity and thus ensuring optimal performance they need when they have to do so many joins on years’ worth of data."),Object(n.mdx)("p",null,"To start creating objects, we need to connect to ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cqlsh"),", which is the ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"CLI")," for interacting with Cassandra using CQL."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Connect to Cqlsh"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ /opt/bitnami/cassandra/bin/cqlsh -u cassandra -p cassandra"))),Object(n.mdx)("p",null,"Create keyspace and list them"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Create keyspace"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"cassandra@cqlsh",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," CREATE KEYSPACE IF NOT EXISTS cycling\n  WITH REPLICATION ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'class'")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'SimpleStrategy'"),",\n   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'replication_factor'")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncassandra@cqlsh",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," DESCRIBE keyspaces",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncycling  system_auth         system_schema  system_views\nsystem   system_distributed  system_traces  system_virtual_schema"))),Object(n.mdx)("p",null,"Switch to cycling keyspace to start creating tables, types or any other database objects"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Switch to cycling keyspace"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"cassandra@cqlsh",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," use cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\ncassandra@cqlsh:cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")))),Object(n.mdx)("p",null,"Below is few create and insert statements for reference. Refer to ",Object(n.mdx)(r,{href:"https://github.com/2much2learn/article-oct192021-cassandra-with-docker/tree/main/schema/cassandra",mdxType:"ExternalLink"},"schema")," for complete set of queries."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Cyclist Names"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-sql"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-sql"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"DROP")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TABLE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"IF")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"EXISTS")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"CREATE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TABLE")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n  id UUID ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"PRIMARY")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"KEY"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  lastname ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  firstname ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  details_ map",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," firstname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," details_",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"e7cd5752",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"bc0d",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4157"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"a80f",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7523"),"add8dbcd",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'VAN DER BREGGEN'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Anna'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," {",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_age'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'35'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_bday'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'27/07/1980'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_nation'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'AUSTRALIA'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," firstname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," details_",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"e7ae5cf3",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"d358",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4"),"d99",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"b900",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"85902"),"fda9bb0",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'FRAME'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Alex'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," {",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_age'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'54'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_bday'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'27/07/1961'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_nation'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'ITALY'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," firstname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," details_",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"220844"),"bf",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4860"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"49"),"d6",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"9"),"a4b",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"6"),"b5d3a79cbfb",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'TIRALONGO'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Paolo'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," {",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_age'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'23'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_bday'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'27/07/1992'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_nation'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'CANADA'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," firstname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," details_",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"6"),"ab09bec",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"e68e",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"48"),"d9",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"a5f8",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"97"),"e6fb4c9b47",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'KRUIKSWIJK'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Steven'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," {",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_age'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'23'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_bday'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'27/07/1992'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_nation'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'GERMANY'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," firstname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," details_",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"fb372533",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"eb95",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4"),"bb4",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"8685"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"6"),"ef61e994caa",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'MATTHEWS'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Michael'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," {",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_age'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'28'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_bday'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'27/07/1987'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'details_nation'"),":",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'NETHERLANDS'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Cyclist Races"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-sql"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-sql"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"DROP")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TABLE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"IF")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"EXISTS")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_races",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"DROP")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TYPE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"IF")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"EXISTS")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"race",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"CREATE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TYPE")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"race ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n   race_title ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n   race_date ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"timestamp"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n   race_time ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"time"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"CREATE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TABLE")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_races ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n  id UUID ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"PRIMARY")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"KEY"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  lastname ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  firstname ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"text"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n  races list",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"FROZEN ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),"race",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">>")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_races ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"races",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n   e7ae5cf3",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"d358",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4"),"d99",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"b900",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"85902"),"fda9bb0",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n   ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"[")," { race_title:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'17th Santos Tour Down Under Aalburg'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," race_date:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'2017-04-14'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_time:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'07:00:00'")," }",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n     { race_title:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'17th Santos Tour Down Under Gelderland'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," race_date:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'2017-04-14'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," race_time:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'08:00:00'")," } ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INSERT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"INTO")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_races ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"id",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," firstname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," races",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," \n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"VALUES")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"\n\te7cd5752",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"bc0d",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4157"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"a80f",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7523"),"add8dbcd",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'VAN DER BREGGEN'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Anna'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," \n\t",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"[")," {race_title:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Festival Luxembourgeois du cyclisme feminin Elsy Jacobs - Prologue - Garnich > Garnich'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_date:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'2017-04-14'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_time:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'08:00:00'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n\t\t{race_title:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Festival Luxembourgeois du cyclisme feminin Elsy Jacobs - Stage 2 - Garnich > Garnich'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_date:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'2017-04-14'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_time:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'06:00:00'"),"}",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n\t\t{race_title:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Festival Luxembourgeois du cyclisme feminin Elsy Jacobs - Stage 3 - Mamer > Mamer'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_date:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'2017-04-14'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"race_time:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'10:00:00'"),"} ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"UPDATE")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_races\n\t",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"SET")," \n    lastname ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'FRAME'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    firstname ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'Alex'"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    races",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"1"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," { race_time:",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'06:00:00'"),"}\n\t\t",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"WHERE")," id ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," e7ae5cf3",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"d358",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4"),"d99",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"b900",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"85902"),"fda9bb0",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("p",null,"The above queries should create ",Object(n.mdx)("strong",{parentName:"p"},"Two")," ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Tables")," and ",Object(n.mdx)("strong",{parentName:"p"},"One")," ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"User Defined Type"),"."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Database objects"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-sql"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-sql"}),"cassandra",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token variable"}),"@cqlsh"),":cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"DESCRIBE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TYPES"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\nrace\n\ncassandra",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token variable"}),"@cqlsh"),":cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"DESCRIBE")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"TABLES"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncyclist_name  cyclist_races"))),Object(n.mdx)("p",null,"Play around with below ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"Select")," query statements"),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Select statements"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"sql"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-sql"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-sql"}),"\ncassandra",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token variable"}),"@cqlsh"),":cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"SELECT")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"*")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"from")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_name",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncassandra",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token variable"}),"@cqlsh"),":cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"SELECT")," lastname",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," races ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"FROM")," cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"."),"cyclist_races ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"WHERE")," id ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," e7cd5752",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"bc0d",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"4157"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),"a80f",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"-"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"7523"),"add8dbcd",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")))),Object(n.mdx)("h2",{id:"connecting-to-the-database-from-gui-client"},"Connecting to the database from GUI Client"),Object(n.mdx)("p",null,"I could find ",Object(n.mdx)(r,{href:"https://razorsql.com/docs/cassandra_database_browser.html",mdxType:"ExternalLink"},"RazorSQL Cassandra Database Browser")," as an ideal option if there is a necessity to explore Cassandra database using GUI Client."),Object(n.mdx)("p",null,Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"RazorSQL")," is a licensed product which provides ",Object(n.mdx)("em",{parentName:"p"},"30 Days")," trail access. "),Object(n.mdx)("p",null,"With ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cqlsh")," and wide options on Cassandra drivers available at hand, We wouldn’t require a GUI client for basic usage."),Object(n.mdx)("h2",{id:"initializing-database-during-container-provisioning"},"Initializing Database during container provisioning"),Object(n.mdx)("p",null,"There would be a need for all of us to initialize the database as part of container provisioning for quick development & testing setup."),Object(n.mdx)("p",null,"A minor change in the ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"docker-compose.yml")," to configure the init scripts defined under ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"volumes")," will do the trick."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"docker-compose.yml"),Object(n.mdx)("div",{className:"gatsby-highlight has-highlighted-lines","data-language":"yml"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-yml"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-yml"}),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"version"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'3'"),"\n\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"services"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"cassandra"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"image"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," docker.io/bitnami/cassandra",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"latest\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"ports"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'7000:7000'"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'9042:9042'"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"volumes"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"gatsby-highlight-code-line"}),"      ",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"-")," ./schema/cassandra",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),":"),"/docker",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"-"),"entrypoint",Object(n.mdx)("span",Object.assign({parentName:"span"},{className:"token punctuation"}),"-"),"initdb.d"),"      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),"'cassandra_data:/bitnami'"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"healthcheck"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"test"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"[")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"CMD"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"/opt/bitnami/cassandra/bin/cqlsh"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"-u cassandra"'),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"-p cassandra"')," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token string"}),'"-e \\"describe keyspaces\\""')," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"interval"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," 15s\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"timeout"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," 10s\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"retries"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token number"}),"10"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"environment"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," CASSANDRA_SEEDS=cassandra\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," CASSANDRA_PASSWORD_SEEDER=yes\n      ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"-")," CASSANDRA_PASSWORD=cassandra\n",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"volumes"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n  ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"cassandra_data"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":"),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token key atrule"}),"driver"),Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," local"))),Object(n.mdx)("p",null,"As highlighted, couple of ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cql")," files are created in order under ",Object(n.mdx)("code",Object.assign({parentName:"p"},{className:"language-text"}),"schema/cassandra")," folder. During the container startup, these scripts will be executed in sequence and the database objects will be created for usage."),Object(n.mdx)("p",null,Object(n.mdx)("figure",Object.assign({parentName:"p"},{className:"gatsby-resp-image-figure",style:{}}),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"figure"},{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"355px"}}),"\n      ",Object(n.mdx)("a",Object.assign({parentName:"span"},{className:"gatsby-resp-image-link",href:"/static/89740238c282c8cef3d5487a27655e33/526ee/repo-structure.png",style:{display:"block"},target:"_blank",rel:"noopener"}),"\n    ",Object(n.mdx)("span",Object.assign({parentName:"a"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"52.760736196319016%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRUlEQVQoz41S7XKDIBDkSdo0QRBBxW8Bv1CT9P2fqGucsf2RZDqzc+LJ7t3tSZIkZPzEwnPATjw8M/61RyAUF5zfgFB26kdz/17mpS9rvV79sozW1d1grC2h+5IsLoQGn8ZW8zL4uTOuMqZAQSGoiOj7srhGuMCDRjLAC1pF83vn/wHRWey6ZvLd7T5nuZKKxamA0K6y4yUZ3zZCEhaVhsp6nYC61siomEvFleKbo88kyOHw5ragmH8Y7bKOt7s3thx957oqkjRJo1A8Ix8QirWm7IfW9WYa26JM1tvsvUMScjK67D4dKyR/rRcyaE2ByqiPEea5t65yfVs3OtUyYJ80+ECD+x/xSw43z88gG1vDPNTZik9u8g47h5DOZNMWbZPnRYyO+GNScvSwrTeiOlfwfL+BAyJoiEBVZ2WV6kwh87Dp8gN6aXKl0ktLMQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.mdx)("img",Object.assign({parentName:"a"},{className:"gatsby-resp-image-image",alt:"Repo structure",title:"Repo structure",src:"/static/89740238c282c8cef3d5487a27655e33/526ee/repo-structure.png",srcSet:["/static/89740238c282c8cef3d5487a27655e33/222b7/repo-structure.png 163w","/static/89740238c282c8cef3d5487a27655e33/ff46a/repo-structure.png 325w","/static/89740238c282c8cef3d5487a27655e33/526ee/repo-structure.png 355w"],sizes:"(max-width: 355px) 100vw, 355px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n  "),"\n    "),"\n    ",Object(n.mdx)("figcaption",Object.assign({parentName:"figure"},{className:"gatsby-resp-image-figcaption"}),"Repo structure"),"\n  ")),Object(n.mdx)("p",null,"Clone the ",Object(n.mdx)(r,{href:"https://github.com/2much2learn/article-mar05-setting-up-cassandra-with-docker-on-windows",mdxType:"ExternalLink"},"Repo")," and run the below command to orchestrate container creation which will initialize the configured schema."),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Database initialization"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone https://github.com/2much2learn/article-oct192021-cassandra-with-docker.git\n\nλ ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," article-oct192021-cassandra-with-docker\n\nλ docker-compose up -d"))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Connect to shell"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"λ docker ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"exec")," -it article-oct192021-cassandra-with-docker-cassandra-1 ",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token function"}),"bash")))),Object(n.mdx)("div",{className:"gatsby-code-title gatsby-remark-code-title"},"Connect to cqlsh and verify initialized database objects"),Object(n.mdx)("div",{className:"gatsby-highlight","data-language":"bash"},Object(n.mdx)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(n.mdx)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),"I have no name",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),"!"),"@d2fc96819e4b:/$ /opt/bitnami/cassandra/bin/cqlsh -u cassandra -p cassandra\n\ncassandra@cqlsh",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," DESCRIBE keyspaces",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncycling  system_auth         system_schema  system_views\nsystem   system_distributed  system_traces  system_virtual_schema\n\ncassandra@cqlsh",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," use cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncassandra@cqlsh:cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">"),"\ncassandra@cqlsh:cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," DESCRIBE tables",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\ncyclist_name  cyclist_races  race_times  rank_by_year_and_name\n\ncassandra@cqlsh:cycling",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," DESCRIBE types",Object(n.mdx)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n\nrace"))),Object(n.mdx)("h2",{id:"conclusion"},"Conclusion"),Object(n.mdx)("p",null,"This article is more of a little hack on making our application development faster by quickly setting up database of our choice without worrying on annoying steps on installing and configuring the database. As Cassandra is one of the most commonly used NoSql databases, having it provisioned with Docker and connecting to our local application is quite simple and easy."),Object(n.mdx)(o,{href:"https://github.com/2much2learn/article-oct192021-cassandra-with-docker",mdxType:"GithubRepo"},"setting-up-cassandra-with-docker-on-windows"))}i.isMDXComponent=!0},zLVn:function(e,a,t){"use strict";function s(e,a){if(null==e)return{};var t,s,n={},c=Object.keys(e);for(s=0;s<c.length;s++)t=c[s],a.indexOf(t)>=0||(n[t]=e[t]);return n}t.d(a,"a",(function(){return s}))}}]);
//# sourceMappingURL=component---src-pages-content-articles-setup-setting-up-cassandra-with-docker-index-md-930e583ac845efab61dc.js.map